!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@tencent/yoga-dom-layout"),require("wasmoon")):"function"==typeof define&&define.amd?define(["exports","@tencent/yoga-dom-layout","wasmoon"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).WebArk={},t.Yoga,t.wasmoon)}(this,(function(t,e,n){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}function o(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}})),e.default=t,Object.freeze(e)}var i=r(e),a=o(n);function s(t){var e="string"==typeof t?Number(t):t;return{red:e>>16&255,alpha:e>>>24&255,green:e>>8&255,blue:255&e}}function u(t){var e=t.toString(16);return(1===e.length?"0".concat(e):e).toUpperCase()}function c(t){var e=s(t),n=e.red,r=e.green,o=e.blue,i=e.alpha;return"#".concat(u(n)).concat(u(r)).concat(u(o)).concat(u(i))}var p,l;!function(){var t=null,e=null}();!function(t){t.ELECTRON="electron",t.MINIPROGRAM="miniprogram",t.WEB="web"}(p||(p={}));var h=((l={})[p.ELECTRON]="px",l[p.WEB]="px",l[p.MINIPROGRAM]="px",l);function f(t){return void 0===t&&(t=p.ELECTRON),t===p.MINIPROGRAM?h[p.MINIPROGRAM]:h[p.ELECTRON]}var d,g=function(){function t(){}return t.calculate=function(t){return t},t.getValue=function(e,n){void 0===n&&(n=p.ELECTRON);var r=e;-1!==e.indexOf("calc")&&(r=t.calculate(e));var o=f(n);return Number.isNaN(Number(r))?r:"".concat(r).concat(o)},t.getYGValue=function(e,n){return void 0===n&&(n=p.ELECTRON),e.split(/,|\s/).map((function(e){return t.getValue(e,n)})).join(" ")},t}();!function(t){t.WIDTH="width",t.MAX_WIDTH="maxWidth",t.MIN_WIDTH="minWidth",t.HEIGHT="height",t.MAX_HEIGHT="maxHeight",t.MIN_HEIGHT="minHeight",t.DISPLAY="display",t.FLEX_DIRECTION="flexDirection",t.JUSTIFY_CONTENT="justifyContent",t.ALIGN_ITEMS="alignItems",t.ALIGN_CONTENT="alignContent",t.ALIGN_SELF="alignSelf",t.FLEX_GROW="flexGrow",t.FLEX_SHRINK="flexShrink",t.FLEX_BASIS="flexBasis",t.FLEX="flex",t.FLEX_WARP="flexWrap",t.POSITION="position",t.LEFT="left",t.TOP="top",t.RIGHT="right",t.BOTTOM="bottom",t.MARGIN="margin",t.MARGIN_BOTTOM="marginBottom",t.MARGIN_LEFT="marginLeft",t.MARGIN_RIGHT="marginRight",t.MARGIN_TOP="marginTop",t.PADDING="padding",t.PADDING_BOTTOM="paddingBottom",t.PADDING_LEFT="paddingLeft",t.PADDING_RIGHT="paddingRight",t.PADDING_TOP="paddingTop",t.BORDER_LEFT_WIDTH="borderLeftWidth",t.BORDER_RIGHT_WIDTH="borderRightWidth",t.BORDER_BOTTOM_WIDTH="borderBottomWidth",t.BORDER_TOP_WIDTH="borderTopWidth",t.LINE_HEIGHT="lineHeight",t.LETTER_SPACING="letterSpacing",t.BACKGROUND_COLOR="backgroundColor",t.BORDER_RADIUS="borderRadius",t.FONT_SIZE="fontSize",t.FONT_STYLE="fontStyle",t.FONT_FAMILY="fontFamily",t.TEXT_ALIGN="textAlign",t.COLOR="color"}(d||(d={}));!function(){function t(){}t.convertToCSSStyle=function(t,e,n){switch(void 0===n&&(n=p.ELECTRON),t){case d.WIDTH:case d.MAX_WIDTH:case d.MIN_WIDTH:case d.HEIGHT:case d.MAX_HEIGHT:case d.MIN_HEIGHT:case d.LEFT:case d.TOP:case d.RIGHT:case d.BOTTOM:case d.MARGIN_BOTTOM:case d.MARGIN_LEFT:case d.MARGIN_TOP:case d.MARGIN_RIGHT:case d.PADDING_BOTTOM:case d.PADDING_LEFT:case d.PADDING_TOP:case d.PADDING_RIGHT:case d.BORDER_RIGHT_WIDTH:case d.BORDER_LEFT_WIDTH:case d.BORDER_TOP_WIDTH:case d.BORDER_BOTTOM_WIDTH:case d.LINE_HEIGHT:case d.LETTER_SPACING:return{name:t,value:g.getValue(e,n)};case d.MARGIN:case d.PADDING:return{name:t,value:g.getYGValue(e,n)};default:return{name:t,value:e}}},t.getClassName=function(t,e){return t?t.split(" ").reduce((function(t,n){return"".concat(t," ").concat(n,"__").concat(e)}),""):""}}();function E(t){return void 0===t}function y(t){return null!=t&&"object"==typeof t}function T(t){return"number"==typeof t||y(t)&&"[object Number]"===Object.prototype.toString.call(t)}function v(t){return T(t)&&t!==+t}function R(t,e){return t===e||!(!v(t)||!v(e))}function m(t){return"string"==typeof t&&"FALSE"===t.toUpperCase()}function I(t){return t.replace(/^http:\/\//,"https://")}function N(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function O(){return"".concat(N()+N(),"-").concat(N(),"-").concat(N(),"-").concat(N(),"-").concat(N()).concat(N()).concat(N())}var _=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,A=/^\w*$/,C=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,S=/\\(\\)?/g,w=1/0;function L(t,e){if(Array.isArray(t))return!1;var n=typeof t;return!("number"!==n&&"symbol"!==n&&"boolean"!==n&&null!==t&&!function(t){return"symbol"==typeof t||y(t)&&"[object Symbol]"===Object.prototype.toString.call(t)}(t))||(A.test(t)||!_.test(t)||null!=e&&t in Object(e))}function b(t){if("string"==typeof t)return t;var e="".concat(t);return"0"===e&&1/t==-w?"-0":e}function G(t,e){return Array.isArray(t)?t:L(t,e)?[t]:(n=String(t),r=[],46===n.charCodeAt(0)&&r.push(""),n.replace(C,(function(t,e,n,o){return r.push(n?o.replace(S,"$1"):e||t),t})),r);var n,r}function M(t,e,n){var r=G(e,t),o=t,i=-1,a=r.length;for(a||(a=1,o=void 0);++i<a;){var s=null==o?void 0:o[b(r[i])];void 0===s&&(i=a,s=n),o=s}return o}function D(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function P(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}var x,k=function(){function t(t,e){this.tag=t,this.traceId=e}return t.applyConfig=function(e){if("boolean"==typeof e)return t.ENABLE_DEBUG=e,t.ENABLE_INFO=e,t.ENABLE_WARN=e,void(t.ENABLE_ERROR=e);"object"==typeof e&&(void 0!==e.enableDebug&&(t.ENABLE_DEBUG=e.enableDebug),void 0!==e.enableInfo&&(t.ENABLE_INFO=e.enableInfo),void 0!==e.enableWarn&&(t.ENABLE_WARN=e.enableWarn),void 0!==e.enableError&&(t.ENABLE_ERROR=e.enableError))},t.getLogger=function(e,n){return new t(e,n)},t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=this.tag,o="[".concat(r,"]");t.ENABLE_DEBUG&&(console.debug?console.debug.apply(console,P([o],D(e),!1)):console.log.apply(console,P([o],D(e),!1)))},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=this.tag,o="[".concat(r,"]");t.ENABLE_INFO&&(console.info?console.info.apply(console,P([o],D(e),!1)):console.log.apply(console,P([o],D(e),!1)))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=this.tag,o="[".concat(r,"]");t.ENABLE_ERROR&&(console.error?console.error.apply(console,P([o],D(e),!1)):console.warn?console.warn.apply(console,P([o],D(e),!1)):console.log.apply(console,P([o],D(e),!1)))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=this.tag,o="[".concat(r,"]");t.ENABLE_WARN&&(console.warn?console.warn.apply(console,P([o],D(e),!1)):console.log.apply(console,P([o],D(e),!1)))},t.ENABLE_ERROR=!0,t.ENABLE_INFO=!0,t.ENABLE_WARN=!0,t.ENABLE_DEBUG=!0,t}();!function(t){t[t.UP=0]="UP",t[t.LEFT=0]="LEFT",t[t.CENTER=1]="CENTER",t[t.RIGHT=2]="RIGHT",t[t.MIDDLE=4]="MIDDLE",t[t.BOTTOM=8]="BOTTOM"}(x||(x={}));var U,H=k.getLogger("Report"),V="WebArk";!function(t){t.CLICK="Click",t.MOUNT="Mount",t.ERROR="Error",t.SET_METADATA_ERROR="SetMetaDataError"}(U||(U={}));var F=function(){},W=function(){function t(t){this.tracer=this.getTracer(t),this.metrics=this.getMetrics(t)}return t.prototype.log=function(t){try{var e=this.tracer;e&&"function"==typeof e.log&&e.log(t)}catch(t){H.error(t)}},t.prototype.error=function(t){try{var e=this.tracer;e&&"function"==typeof e.log&&e.error(t)}catch(t){H.error(t)}},t.prototype.reportValue=function(t,e,n){try{var r=this.metrics;r&&"function"==typeof r.reportValue&&r.reportValue(t,e,n)}catch(t){H.error(t)}},t.prototype.reportCount=function(t,e,n){try{var r=this.metrics;r&&"function"==typeof r.reportValue&&r.reportCount(t,e,n)}catch(t){H.error(t)}},t.prototype.getTracer=function(t){var e={log:F,error:F};try{var n="instance_".concat(Date.now(),"_").concat(parseInt(String(1e10*Math.random()),10));return"function"==typeof(null==t?void 0:t.getTracer)&&t.getTracer(n)||e}catch(t){return H.error("getTracer error.",t),e}},t.prototype.getMetrics=function(t){var e={reportValue:F,reportCount:F};try{var n="instance_".concat(Date.now(),"_").concat(parseInt(String(1e10*Math.random()),10));return"function"==typeof(null==t?void 0:t.getMetric)&&t.getMetric(n)||e}catch(t){return H.error("getTracer error.",t),e}},t}();var B=function(t,e){return B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},B(t,e)};function z(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}B(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function Y(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function X(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}function K(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function j(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}var q,Q;!function(t){t.DEFAULT="default",t.CONCISE="concise"}(q||(q={})),function(t){t[t.AUTO_SIZE=1]="AUTO_SIZE",t[t.CUSTOM=0]="CUSTOM"}(Q||(Q={}));var J,Z=k.getLogger("AppUtil"),$=function(){function t(){}return t.GetImages=function(t){var e=t.getExtendObject().images;return Array.isArray(e)?e:[]},t.GetStyles=function(t){return t.getExtendObject().styles||{}},t.GetAppKey=function(t){return t.getExtendObject().appKey||""},t.GetAppid=function(t){return t.getExtendObject().appid||""},t.GetFonts=function(t){return t.getExtendObject().fonts||{}},t.GetAppVersion=function(t){return t.getExtendObject().appVersion||"unknown"},t.GetBuildVersion=function(t){return t.getExtendObject().buildVersion||"unknown"},t.GetApplicationEvents=function(t){var e=t.getExtendObject();return Array.isArray(e.applicationEvents)?e.applicationEvents:[]},t.GetApplicationId=function(t){var e=t.getExtendObject();return e.applicationId||e.appKey},t.GetUrlWhiteList=function(t){var e=t.getExtendObject();return Array.isArray(e.urlWhiteList)?e.urlWhiteList:[]},t.CheckUrlLegality=function(t,e){return"string"==typeof e&&0!==e.trim().length},t.GetEmptySize=function(t,e){var n=M(t,"app.GetEmptySize");if("function"==typeof n)try{return n(e)}catch(t){return Z.error("GetEmptySize fail.",t),null}return null},t}(),tt=function(){function t(){this.eventCallbackMap=new Map}return t.prototype.Release=function(){this.eventCallbackMap.clear()},t.prototype.AttachEvent=function(t,e){var n=this.eventCallbackMap.get(t);n&&Array.isArray(n)?n.push(e):this.eventCallbackMap.set(t,[e])},t.prototype.DetachEvent=function(t,e){var n=this.eventCallbackMap.get(t);if(n){var r=n.findIndex((function(t){return t===e}));-1!==r?n.splice(r,1):n=[]}},t.prototype.FireEvent=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=this.eventCallbackMap.get(t);r&&Array.isArray(r)&&r.forEach((function(t){t.apply(void 0,j([],K(e),!1))}))},t}();!function(t){t.ON_CREATE_VIEW="OnCreateView",t.ON_DESTROY_VIEW="OnDestroyView",t.ON_START_UP="OnStartup",t.ON_CONFIG_CHANGE="OnConfigChange",t.ON_EXIT="OnExit",t.ON_ACTIVATE="OnActivate",t.ON_SHARE="OnShare",t.ON_SET_VALUE="OnSetValue"}(J||(J={}));var et=k.getLogger("ApplicationManager"),nt=function(){function t(){}return t.AddApplication=function(e,n){return!(!n||!e)&&(et.debug("AddApplication applicationId:",e,", application:",n),t.applicationMap.set(e,n),!0)},t.GetApplication=function(e){return e?t.applicationMap.get(e):null},t.RemoveApplication=function(e){if(!e)return!1;t.applicationMap.delete(e)},t.applicationMap=new Map,t}(),rt=k.getLogger("EventListener"),ot="target",it=function(){function t(t,e,n){this.eventMap=new Map,this.applicationId=e,this.catchErrorHandle=n,Object.defineProperty(this,ot,{value:t,enumerable:!1,writable:!0,configurable:!1})}return t.prototype.GetApp=function(){return nt.GetApplication(this.applicationId).GetApp()},t.prototype.GetTarget=function(){return this[ot]},t.prototype.AddEventListener=function(t,e){t&&e&&(this.eventMap.set(t,e),this.Attach(t))},t.prototype.Release=function(){this.Detach(),this.eventMap.clear()},t.prototype.CallEventMethod=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(t){var r=this.eventMap.get(t);if(r){var o=this.GetApp();o.isLua&&(r="LuaBridge.".concat(r));var i=M(o,r),a=t;if(rt.debug("CallEventMethod event: ".concat(a,", script: ").concat(r)),"function"!=typeof i)return rt.error("invalid event callback. event: ".concat(a,", script: ").concat(r)),void("function"==typeof this.catchErrorHandle&&this.catchErrorHandle(a,r,new Error("InvalidEventCallback")));try{i.apply(void 0,j([],K(e),!1)),rt.debug("CallEventMethod event: ".concat(a,", script: ").concat(r," success."))}catch(t){rt.error("CallEventMethod fail. event: ".concat(a,", script: ").concat(r,"."),t),"function"==typeof this.catchErrorHandle&&this.catchErrorHandle(a,r,t)}}}},t}(),at=k.getLogger("ApplicationEventListener"),st=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.OnCreateViewHandle=function(t,n){e.CallEventMethod(J.ON_CREATE_VIEW,t,n)},e.OnDestroyViewHandle=function(t){e.CallEventMethod(J.ON_DESTROY_VIEW,t)},e.OnStartupHandle=function(t){e.CallEventMethod(J.ON_START_UP,t)},e.OnConfigChangeHandle=function(t){e.CallEventMethod(J.ON_CONFIG_CHANGE,t)},e.OnExitHandle=function(){e.CallEventMethod(J.ON_EXIT)},e.OnActivateHandle=function(t,n){e.CallEventMethod(J.ON_ACTIVATE,t,n)},e.OnShareHandle=function(t,n){e.CallEventMethod(J.ON_SHARE,t,n)},e}return z(e,t),e.prototype.Attach=function(t){at.debug("AttachEvent:",t);var e=this.GetTarget();switch(t){case J.ON_CREATE_VIEW:e.AttachEvent(J.ON_CREATE_VIEW,this.OnCreateViewHandle);break;case J.ON_START_UP:e.AttachEvent(J.ON_START_UP,this.OnStartupHandle);break;case J.ON_EXIT:e.AttachEvent(J.ON_EXIT,this.OnExitHandle);break;case J.ON_DESTROY_VIEW:e.AttachEvent(J.ON_DESTROY_VIEW,this.OnDestroyViewHandle);break;case J.ON_ACTIVATE:e.AttachEvent(J.ON_ACTIVATE,this.OnActivateHandle);break;case J.ON_SHARE:e.AttachEvent(J.ON_SHARE,this.OnShareHandle);break;case J.ON_CONFIG_CHANGE:e.AttachEvent(J.ON_CONFIG_CHANGE,this.OnConfigChangeHandle)}},e.prototype.Detach=function(){at.debug("AttachEvent");var t=this.GetTarget();t.DetachEvent(J.ON_CREATE_VIEW,this.OnCreateViewHandle),t.DetachEvent(J.ON_START_UP,this.OnStartupHandle),t.DetachEvent(J.ON_EXIT,this.OnExitHandle),t.DetachEvent(J.ON_DESTROY_VIEW,this.OnDestroyViewHandle),t.DetachEvent(J.ON_ACTIVATE,this.OnActivateHandle),t.DetachEvent(J.ON_SHARE,this.OnShareHandle),t.DetachEvent(J.ON_CONFIG_CHANGE,this.OnConfigChangeHandle)},e}(it),ut=k.getLogger("HttpManager"),ct=function(){function t(){}return t.AddHttp=function(e,n){if(!e||!n)return!1;var r=t.httpNode.get(e);ut.debug("AddHttp applicationId:",e,n),Array.isArray(r)?r.push(n):r=[n],t.httpNode.set(e,r),ut.debug("AddHttp success:",e,n)},t.RemoveHttp=function(e,n){if(e&&n){ut.debug("RemoveHttp applicationId:",e,n);var r=t.httpNode.get(e);if(Array.isArray(r)){var o=r.findIndex((function(t){return t===n}));-1!==o&&r.splice(o,1),t.httpNode.set(e,r)}ut.debug("RemoveHttp success.",t.httpNode.get(e))}},t.CleanHttp=function(e){e&&(ut.debug("CleanHttp applicationId:",e),t.httpNode.delete(e),ut.debug("CleanHttp success.",t.httpNode))},t.httpNode=new Map,t}(),pt=k.getLogger("Application"),lt=function(t){function e(e,n){var r=t.call(this)||this;return r.isUnmounted=!1,r.app=e,r.appid=$.GetAppid(e),r.applicationId=$.GetApplicationId(e),r.templates=n,r.Init(),r.listener=new st(r,r.applicationId,r.EventCatchErrorHandle.bind(r)),$.GetApplicationEvents(e).forEach((function(t){var e=t.eventName,n=t.callback;r.listener.AddEventListener(e,n)})),r}return z(e,t),e.IsUnmounted=function(t){if(!t)return!0;var e=nt.GetApplication(t);return!e||e.IsUnmounted()},e.prototype.GetApp=function(){return this.app},e.prototype.GetApplicationId=function(){return this.applicationId},e.prototype.SetConfig=function(t){pt.debug("SetConfig:",t),this.FireEvent(J.ON_CONFIG_CHANGE,t)},e.prototype.CreateRootView=function(t,e){return pt.info("CreateRootView view:",t,"container:",e),this.CreateView(t,!0,e)},e.prototype.Release=function(){if(pt.debug("Application Release:",this.app),!this.isUnmounted){t.prototype.Release.call(this);var e=this.applicationId;this.isUnmounted=!0,this.listener.Release(),this.templates={},ct.CleanHttp(e),nt.RemoveApplication(e)}},e.prototype.GetTemplates=function(){return this.templates},e.prototype.Load=function(){return pt.info("Application.Load()"),!0},e.prototype.Run=function(t){return pt.info("Application.Run()",t),this.Startup(t),!0},e.prototype.Startup=function(t){pt.info("Application.StartUp(config) config:",t),this.FireEvent(J.ON_START_UP,t)},e.prototype.Exit=function(){pt.info("Application.Exit()"),this.FireEvent(J.ON_EXIT)},e.prototype.IsUnmounted=function(){return this.isUnmounted},e.prototype.Init=function(){pt.info("Application.init()")},e}(tt);!function(){function t(t,e,n,r){this.set(t,e,n,r)}t.prototype.set=function(t,e,n,r){this.left=t||0,this.top=e||0,this.width=n||0,this.height=r||0},t.prototype.isEmpty=function(){return!(this.width&&this.height)}}();var ht=["qun.qq.com"];var ft,dt,gt={isWorker:ft=("undefined"==typeof window||"undefined"==typeof HTMLElement||"undefined"==typeof IntersectionObserver)&&"undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,isMainThread:!ft};!function(t){t[t.PUBLIC_PLATFORM=1]="PUBLIC_PLATFORM",t[t.FRIEND_CHAT=2]="FRIEND_CHAT",t[t.GROUP_CHAT=3]="GROUP_CHAT",t[t.DISCUSSION_GROUP=4]="DISCUSSION_GROUP",t[t.GROUP_TMP_CHAT=5]="GROUP_TMP_CHAT",t[t.DISCUSSION_TMP_CHAT=6]="DISCUSSION_TMP_CHAT",t[t.CHANNEL=7]="CHANNEL",t[t.OTHER=-1]="OTHER"}(dt||(dt={}));var Et,yt,Tt,vt,Rt,mt,It,Nt,Ot,_t,At="1.0.0",Ct=dt.GROUP_CHAT,St=k.getLogger("BaseApplicationContext"),wt=function(){function t(t){var e=t.uin,n=t.tinyId,r=t.getPskey,o=t.domains,i=t.setCookie,a=t.logger,s=t.monitor,u=t.debug,c=t.getQQVersion,p=t.getContainerInfo,l=t.isMute,h=t.httpProxy;k.applyConfig(a),this.domains=Array.isArray(o)?o:ht,this.setCookieHandle=i,this.getPskeyHandle=r;try{var f="string"==typeof e?e:e();this.uin=f||""}catch(t){this.uin=""}try{var d="string"==typeof n?n:n();this.tinyId=d||""}catch(t){this.tinyId=""}this.loggerConfig=a,this.monitor=s,this.debug=Boolean(u),this.containerInfoHandle=p,this.isMuteHandle=l,this.initQQVersion(c),this.httpProxyHandle="function"==typeof h?h:null}return t.prototype.getLoggerConfig=function(){return this.loggerConfig},t.prototype.getUin=function(){return this.uin},t.prototype.getTinyId=function(){return this.tinyId},t.prototype.getQQVersion=function(){return this.qqVersion},t.prototype.getHttpProxy=function(){return this.httpProxyHandle},t.prototype.getContainerInfo=function(t){var e=this.containerInfoHandle,n={ChatType:Ct};try{if("function"==typeof e)return e(t)||n}catch(t){St.error("getContainerInfo fail.",t)}return n},t.prototype.isMute=function(t){var e=this.isMuteHandle;try{if("function"==typeof e)return e(t)||!1}catch(t){St.error("isMute fail.",t)}return!1},t.prototype.getPskeyAsync=function(t){return Y(this,void 0,void 0,(function(){var e,n,r,o;return X(this,(function(i){switch(i.label){case 0:if("function"!=typeof(e=this.getPskeyHandle))return St.error("getPskey() not function."),[2,new Map];if(!(n="string"==typeof t?[t.trim()]:Array.isArray(t)?t:[]).length)return[2,new Map];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,e(n)];case 2:return(r=i.sent())&&"function"==typeof r.forEach&&"function"==typeof r.get?[2,r]:(St.error("format error",r),[2,new Map]);case 3:return o=i.sent(),St.error("getPskeyAsync() error. domain: ".concat(t),o),[2,new Map];case 4:return[2]}}))}))},t.prototype.getReport=function(){return this.reportInstance||(this.reportInstance=new W(this.monitor)),this.reportInstance},t.prototype.setCookie=function(t){St.debug("setCookie:",t);var e=this.setCookieHandle;"function"==typeof e?e(t):St.warn("SetCookie() not function.")},t.prototype.isDebug=function(){return this.debug},t.prototype.initQQVersion=function(t){this.qqVersion=At;try{"function"==typeof t&&(this.qqVersion=t()||At)}catch(t){St.error("getQQVersion fail.",t)}},t.DEFAULT_APPLICATION_CONTEXT_DATA={uin:"",tinyId:"",getPskey:function(){return Promise.resolve(new Map)},setCookie:function(){return Promise.resolve()},logger:!0,monitor:null,debug:!1},t}(),Lt=function(){function t(t,e){this.app=t,this.templates=e||{}}return t.prototype.GetApplicationVersion=function(){var t=this.app,e=$.GetAppVersion(t).split(".").map((function(t){var e=parseInt(t.trim(),10).toString(16),n="";return e.length<4&&(n=new Array(4-e.length).fill(0).join("")),n+e}));return parseInt("0x".concat(e.join("")),16)},t}(),bt={all:Et=Et||new Map,on:function(t,e){var n=Et.get(t);n?n.push(e):Et.set(t,[e])},off:function(t,e){var n=Et.get(t);n&&(e?n.splice(n.indexOf(e)>>>0,1):Et.set(t,[]))},emit:function(t,e){var n=Et.get(t);n&&n.slice().map((function(t){t(e)})),(n=Et.get("*"))&&n.slice().map((function(n){n(t,e)}))}};!function(t){t[t.SOLID=0]="SOLID",t[t.DASH=1]="DASH",t[t.DOT=2]="DOT",t[t.DASH_DOT=3]="DASH_DOT",t[t.DASH_DOT_DOT=4]="DASH_DOT_DOT"}(yt||(yt={})),function(t){t[t.BUTT=0]="BUTT",t[t.ROUND=1]="ROUND",t[t.SQUARE=2]="SQUARE"}(Tt||(Tt={})),function(t){t[t.MITER=0]="MITER",t[t.ROUND=1]="ROUND",t[t.BEVEL=2]="BEVEL"}(vt||(vt={})),function(t){t[t.FILL=0]="FILL",t[t.STROKE=1]="STROKE",t[t.FILL_STROKE=2]="FILL_STROKE"}(Rt||(Rt={})),function(t){t[t.SOURCEOVER=0]="SOURCEOVER",t[t.DESTINATIONOVER=1]="DESTINATIONOVER",t[t.COPY=2]="COPY",t[t.SOURCEIN=3]="SOURCEIN",t[t.DESTINATIONIN=4]="DESTINATIONIN",t[t.SOURCEOUT=5]="SOURCEOUT",t[t.DESTINATIONOUT=6]="DESTINATIONOUT",t[t.SOURCEATOP=7]="SOURCEATOP",t[t.DESTINATIONATOP=8]="DESTINATIONATOP",t[t.XOR=9]="XOR",t[t.MULTIPLY=10]="MULTIPLY"}(mt||(mt={})),function(t){t[t.ACTUAL_SIZE=0]="ACTUAL_SIZE",t[t.FULL_IMAGE=1]="FULL_IMAGE",t[t.FILL=2]="FILL"}(It||(It={})),function(t){t.FILL="fill",t.ASPECTFIT="aspectfit",t.ASPECTFILL="aspectfill",t.WIDTHFIX="widthfix",t.TOP="top",t.BOTTOM="bottom",t.CENTER="center",t.LEFT="left",t.RIGHT="right"}(Nt||(Nt={})),function(t){t[t.NULL=-1]="NULL",t[t.FILL=0]="FILL",t[t.ASPECTFIT=1]="ASPECTFIT",t[t.ASPECTFILL=2]="ASPECTFILL",t[t.WIDTHFIX=3]="WIDTHFIX",t[t.TOP=4]="TOP",t[t.BOTTOM=5]="BOTTOM",t[t.CENTER=6]="CENTER",t[t.LEFT=7]="LEFT",t[t.RIGHT=8]="RIGHT",t[t.TOP_LEFT=9]="TOP_LEFT",t[t.TOP_RIGHT=10]="TOP_RIGHT",t[t.BOTTOM_LEFT=11]="BOTTOM_LEFT",t[t.BOTTOM_RIGHT=12]="BOTTOM_RIGHT"}(Ot||(Ot={})),function(t){t.CANVAS="Canvas",t.IMAGE="Image",t.TEXT="Text",t.VIEW="View",t.TEXTURE="Texture",t.VIDEO="Video",t.AUDIO="Audio"}(_t||(_t={}));var Gt,Mt=function(t){function e(){var e=t.call(this)||this;return e.nodeType=e.GetNodeType(),e}return z(e,t),e.prototype.IsType=function(t){return this.nodeType===t},e.prototype.GetType=function(){return this.nodeType},e.prototype.GetID=function(){return this.id},e.prototype.SetID=function(t){this.id=t},e.prototype.Release=function(){t.prototype.Release.call(this)},e}(tt),Dt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return z(e,t),e}(Mt),Pt=function(){function t(t,e){this.SetWidth(t),this.SetHeight(e)}return t.IsEqual=function(t,e){return t===e||!!(t&&e&&R(t.GetWidth(),e.GetWidth())&&R(t.GetHeight(),e.GetHeight()))},t.IsNotEqual=function(e,n){return!t.IsEqual(e,n)},t.prototype.GetWidth=function(){return this.width},t.prototype.GetHeight=function(){return this.height},t.prototype.SetWidth=function(t){this.width=T(t)&&t||0},t.prototype.SetHeight=function(t){this.height=T(t)&&t||0},t.prototype.SetSize=function(t,e){this.width=t,this.height=e},t.prototype.IsEqual=function(e){return t.IsEqual(this,e)},t.prototype.IsNotEqual=function(t){return!this.IsEqual(t)},t.prototype.IsEmpty=function(){return 0===this.width&&0===this.height||v(this.width)&&v(this.height)},t.prototype.IsNotEmpty=function(){return!this.IsEmpty()},t.prototype.Copy=function(){return new t(this.width,this.height)},t.EmptySize=Object.freeze(new t(0,0)),t}(),xt=k.getLogger("UIObjectEventListener");!function(t){t.ON_SET_VALUE="OnSetValue",t.ON_CHANGE="OnChange",t.ON_RESIZE="OnResize",t.ON_MOVE="OnMove",t.ON_PARENT_CHANGED="OnParentChanged",t.ON_CHILD_CHANGE="OnChildChange",t.ON_FOCUS_CHANGED="OnFocusChanged",t.ON_CLICK="OnClick",t.ON_MOUSE_DOWN="OnMouseDown",t.ON_MOUSE_UP="OnMouseUp",t.ON_LOAD="OnLoad",t.ON_ERROR="OnError",t.ON_VISIBLE_CHANGED="OnVisibleChanged"}(Gt||(Gt={}));var kt,Ut=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.OnSetValueHandle=function(t,n){e.CallEventMethod(Gt.ON_SET_VALUE,t,n)},e.OnClickHandle=function(t,n,r,o,i){e.CallEventMethod(Gt.ON_CLICK,t,n,r,o,i)},e.OnMouseDownHandle=function(t,n,r,o,i){e.CallEventMethod(Gt.ON_MOUSE_DOWN,t,n,r,o,i)},e.OnMouseUpHandle=function(t,n,r,o,i){e.CallEventMethod(Gt.ON_MOUSE_UP,t,n,r,o,i)},e.OnErrorHandle=function(t){e.CallEventMethod(Gt.ON_ERROR,t)},e.OnLoadHandle=function(t){e.CallEventMethod(Gt.ON_LOAD,t)},e.OnChangeHandle=function(t,n,r,o,i){e.CallEventMethod(Gt.ON_CHANGE,t,n,r,o,i)},e}return z(e,t),e.prototype.Attach=function(t){xt.debug("AttachEvent:",t);var e=this.GetTarget();switch(t){case Gt.ON_SET_VALUE:e.AttachEvent(Gt.ON_SET_VALUE,this.OnSetValueHandle);break;case Gt.ON_CHANGE:e.AttachEvent(Gt.ON_CHANGE,this.OnChangeHandle);break;case Gt.ON_CLICK:e.AttachEvent(Gt.ON_CLICK,this.OnClickHandle);break;case Gt.ON_MOUSE_DOWN:e.AttachEvent(Gt.ON_MOUSE_DOWN,this.OnMouseDownHandle);break;case Gt.ON_MOUSE_UP:e.AttachEvent(Gt.ON_MOUSE_UP,this.OnMouseUpHandle);break;case Gt.ON_ERROR:e.AttachEvent(Gt.ON_ERROR,this.OnErrorHandle);break;case Gt.ON_LOAD:e.AttachEvent(Gt.ON_LOAD,this.OnLoadHandle)}},e.prototype.Detach=function(){var t=this.GetTarget();t.DetachEvent(Gt.ON_SET_VALUE,this.OnSetValueHandle),t.DetachEvent(Gt.ON_CHANGE,this.OnChangeHandle),t.DetachEvent(Gt.ON_CLICK,this.OnClickHandle),t.DetachEvent(Gt.ON_MOUSE_DOWN,this.OnMouseDownHandle),t.DetachEvent(Gt.ON_MOUSE_UP,this.OnMouseUpHandle),t.DetachEvent(Gt.ON_ERROR,this.OnErrorHandle),t.DetachEvent(Gt.ON_LOAD,this.OnLoadHandle)},e}(it);!function(t){t[t.ANCHOR_LEFT=1]="ANCHOR_LEFT",t[t.ANCHOR_TOP=2]="ANCHOR_TOP",t[t.ANCHOR_RIGHT=4]="ANCHOR_RIGHT",t[t.ANCHOR_BOTTOM=8]="ANCHOR_BOTTOM"}(kt||(kt={}));var Ht,Vt=kt.ANCHOR_LEFT|kt.ANCHOR_TOP,Ft=255,Wt=function(t){function e(e){var n=t.call(this)||this;return n.autoSize=!1,n.released=!1,n.hashId="",n.applicationId=e,n.size=new Pt,n.autoSize=!1,n.listener=new Ut(n,n.applicationId,n.EventCatchErrorHandle.bind(n)),n.hashId="".concat(String((new Date).getTime()),"_").concat(Math.random().toString(16)),n}return z(e,t),e.prototype.GetApp=function(){return nt.GetApplication(this.applicationId).GetApp()},e.prototype.GetApplicationId=function(){return this.applicationId},e.prototype.AddEventListener=function(t,e){this.listener.AddEventListener(t,e)},e.prototype.Release=function(){var e;t.prototype.Release.call(this),this.released=!0,null===(e=this.listener)||void 0===e||e.Release()},e.prototype.DoSetValue=function(t){this.FireEvent(Gt.ON_SET_VALUE,this,t)},e}(Mt),Bt=function(){},zt=function(){},Yt=function(){},Xt=function(){function t(t,e){this.setX(t),this.setY(e)}return t.Subtract=function(e,n){var r=e||new t,o=n||new t;return new t((r.getX()||0)-(o.getX()||0),(r.getY()||0)-(o.getY()||0))},t.Add=function(e,n){var r=e||new t,o=n||new t;return new t((r.getX()||0)+(o.getX()||0),(r.getY()||0)+(o.getY()||0))},t.isEqual=function(t,e){return t===e||!(!t||!e)&&(R(t.getX(),e.getX())&&R(t.getY(),e.getY()))},t.isNotEqual=function(t,e){return!this.isEqual(t,e)},t.prototype.getX=function(){return this.x},t.prototype.setX=function(t){this.x=T(t)&&t||0},t.prototype.getY=function(){return this.y},t.prototype.setY=function(t){this.y=T(t)&&t||0},t.AddSize=function(e,n){return e||n?!e&&n?new t(n.GetWidth(),n.GetHeight()):new t(e.getX(),e.getY()).AddSize(n):null},t.prototype.AddSize=function(t){return t?(this.x+=t.GetWidth(),this.y+=t.GetHeight(),this):this},t.prototype.isEqual=function(e){return t.isEqual(this,e)},t.prototype.isNotEqual=function(e){return!t.isEqual(this,e)},t.prototype.Copy=function(){return new t(this.x,this.y)},t.EmptyPoint=Object.freeze(new t(0,0)),t}(),Kt=function(){function t(t,e,n,r){t=E(t)?0:t||0,e=E(e)?0:e||0,n=E(n)?0:n||0,r=E(r)?0:r||0,"number"==typeof t&&"number"==typeof e&&"number"==typeof n&&"number"==typeof r?this.SetRect(t,e,n,r):t instanceof Xt&&e instanceof Xt?this.SetRect(t.getX()||0,t.getY()||0,e.getX()||0,e.getY()||0):this.SetRect(parseInt(String(t),10)||0,parseInt(String(e),10)||0,parseInt(String(n),10)||0,parseInt(String(r),10)||0)}return t.CreateEmptyRect=function(){return new t(0,0,0,0)},t.IsEmptyRect=function(t){return t&&(0===t.getLeft()||v(t.getLeft()))&&(0===t.getTop()||v(t.getTop()))&&(0===t.getRight()||v(t.getRight()))&&(0===t.getBottom()||v(t.getBottom()))},t.UnionRect=function(e,n){if(R(e.getLeft(),e.getRight())||R(e.getTop(),e.getBottom()))return R(n.getLeft(),n.getRight())||R(n.getTop(),n.getBottom())?t.CreateEmptyRect():n.Copy();if(R(n.getLeft(),n.getRight())||R(n.getTop(),n.getBottom()))return R(e.getLeft(),e.getRight())||R(e.getTop(),e.getBottom())?t.CreateEmptyRect():e.Copy();var r=e.getLeft()<n.getLeft()?e.getLeft():n.getLeft(),o=e.getTop()<n.getTop()?e.getTop():n.getTop(),i=e.getRight()>n.getRight()?e.getRight():n.getRight(),a=e.getBottom()>n.getBottom()?e.getBottom():n.getBottom();return r<i&&o<a?new t(r,o,i,a):t.CreateEmptyRect()},t.IntersectRect=function(e,n){var r=e.getLeft()>n.getLeft()?e.getLeft():n.getLeft(),o=e.getTop()>n.getTop()?e.getTop():n.getTop(),i=e.getRight()<n.getRight()?e.getRight():n.getRight(),a=e.getBottom()<n.getBottom()?e.getBottom():n.getBottom();return r<i&&o<a?new t(r,o,i,a):t.CreateEmptyRect()},t.IsEqual=function(t,e){return t===e||!(!t||!e)&&(R(t.getLeft(),e.getLeft())&&R(t.getTop(),e.getTop())&&R(t.getRight(),e.getRight())&&R(t.getBottom(),e.getBottom()))},t.IsNotEqual=function(e,n){return!t.IsEqual(e,n)},t.AddPoint=function(t,e){return t.Copy().AddPoint(e),t},t.prototype.SetRect=function(t,e,n,r){this.setLeft(t),this.setTop(e),this.setRight(n),this.setBottom(r)},t.prototype.getLeft=function(){return this.left},t.prototype.setLeft=function(t){this.left=T(t)&&t||0},t.prototype.getRight=function(){return this.right},t.prototype.setRight=function(t){this.right=T(t)&&t||0},t.prototype.getTop=function(){return this.top},t.prototype.setTop=function(t){this.top=T(t)&&t||0},t.prototype.getBottom=function(){return this.bottom},t.prototype.setBottom=function(t){this.bottom=T(t)&&t||0},t.prototype.DeflateRect=function(t){this.left+=t.left||0,this.top+=t.top||0,this.right-=t.right||0,this.bottom-=t.bottom||0},t.prototype.Width=function(){return this.right-this.left},t.prototype.Height=function(){return this.bottom-this.top},t.prototype.GetSize=function(){return new Pt(this.right-this.left,this.bottom-this.top)},t.prototype.TopLeft=function(){return new Xt(this.left,this.top)},t.prototype.BottomRight=function(){return new Xt(this.right,this.bottom)},t.prototype.MoveToY=function(t){var e=this.Height();this.top=t,this.bottom=e+(t||0)},t.prototype.MoveToX=function(t){var e=this.Width();this.left=t,this.right=e+(t||0)},t.prototype.MoveToXY=function(t,e){this.MoveToX(t),this.MoveToY(e)},t.prototype.SetRectEmpty=function(){this.SetRect(0,0,0,0)},t.prototype.PtInRect=function(t){return t.getX()>=this.left&&t.getX()<this.right&&t.getY()>=this.top&&t.getY()<this.bottom},t.prototype.SubtractPoint=function(t){t&&this.OffsetRect(-t.getX(),-t.getY())},t.prototype.AddPoint=function(t){if(!t)return this;this.OffsetRect(t.getX(),t.getY())},t.prototype.OffsetRect=function(t,e){this.left+=t||0,this.top+=e||0,this.right+=t||0,this.bottom+=e||0},t.prototype.IntersectRect=function(e,n){var r,o=(r=E(n)?t.IntersectRect(this,e):t.IntersectRect(e,n)).left,i=r.top,a=r.right,s=r.bottom;this.SetRect(o,i,a,s)},t.prototype.UnionRect=function(e,n){var r,o=(r=E(n)?t.UnionRect(this,e):t.UnionRect(e,n)).left,i=r.top,a=r.right,s=r.bottom;this.SetRect(o,i,a,s)},t.prototype.IsEqual=function(e){return t.IsEqual(this,e)},t.prototype.IsNotEqual=function(t){return this.IsEqual(t)},t.prototype.IsEmpty=function(){return t.IsEmptyRect(this)},t.prototype.IsNotEmpty=function(){return!this.IsEmpty()},t.prototype.Copy=function(){return new t(this.left,this.top,this.right,this.bottom)},t.EmptyRect=Object.freeze(new t(0,0,0,0)),t}(),jt=k.getLogger("QQ"),qt=function(){function t(){}return t.prototype.emitter=function(t,e){bt.emit(t,e)},t.prototype.Report=function(t,e,n){jt.warn("QQ.Report() not implemented. id:".concat(t,", index:").concat(e,", action:").concat(n)),this.emitter("Report",{id:t,index:e,action:n})},t.prototype.ReportEx=function(t,e){jt.warn("QQ.ReportEx() not implemented. type:".concat(t,", data:").concat(JSON.stringify(e))),this.emitter("ReportEx",{type:t,data:e})},t.prototype.OpenUrl=function(t){this.emitter("openUrl",{url:t})},t.prototype.OpenView=function(t,e,n,r){this.emitter("openView",{owner:t,type:e,template:n,meta:r})},t.prototype.Notify=function(t,e,n){jt.warn("QQ.Notify() not implemented. appid: ".concat(t,", name: ").concat(e,", data: ").concat(n)),this.emitter("Notify",{appid:t,name:e,data:n})},t.prototype.GetViewProperty=function(t){return jt.warn("GetViewProperty view:",t),{}},t.prototype.Log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];jt.info.apply(jt,j([],K(t),!1)),this.emitter("Log",{params:t})},t.prototype.ShareView=function(t,e,n){jt.warn("QQ.ShareView() not implemented. template: ".concat(t,", meta: ").concat(e,", config: ").concat(n)),this.emitter("ShareView",{template:t,meta:e,config:n})},t.prototype.ShowStatusBar=function(t,e){jt.warn("QQ.ShowStatusBar() not implemented. owner: ".concat(t,", prompt: ").concat(e)),this.emitter("ShowStatusBar",{owner:t,prompt:e})},t.prototype.HideStatusBar=function(t){jt.warn("QQ.HideStatusBar() not implemented. owner: ".concat(t)),this.emitter("HideStatusBar",{owner:t})},t.prototype.PreviewImage=function(t,e){jt.warn("QQ.PreviewImage() not implemented. urls: ".concat(t,", current: ").concat(e)),this.emitter("PreviewImage",{urls:t,current:e})},t.prototype.SetTalkBackText=function(t,e){jt.warn("QQ.SetTalkBackText() not implemented. text: ".concat(t,", owner: ").concat(e)),this.emitter("SetTalkBackText",{text:t,owner:e})},t.prototype.SendMessage=function(t,e,n){jt.warn("QQ.SendMessage() not implemented. options: ".concat(t,", launchSelector: ").concat(e,", owner: ").concat(n)),this.emitter("SendMessage",{options:t,launchSelector:e,owner:n})},t}(),Qt=function(){function t(){}return t.prototype.TableToJSON=function(t){return"string"==typeof t?t:JSON.stringify(t)},t.prototype.JSONToTable=function(t){return t&&"object"==typeof t?t:JSON.parse(t)},t.prototype.UrlEncode=function(t){return encodeURIComponent(t)},t.prototype.UrlDecode=function(t){return decodeURIComponent(t)},t}();!function(t){t[t.ARK_HTTP_CLIENT_ERROR_OK=0]="ARK_HTTP_CLIENT_ERROR_OK",t[t.ARK_HTTP_CLIENT_ERROR_NOT_MODIFIED=1]="ARK_HTTP_CLIENT_ERROR_NOT_MODIFIED",t[t.ARK_HTTP_CLIENT_ERROR_OTHER=2]="ARK_HTTP_CLIENT_ERROR_OTHER",t[t.ARK_HTTP_CLIENT_ERROR_SERVER_CLOSE=3]="ARK_HTTP_CLIENT_ERROR_SERVER_CLOSE",t[t.ARK_HTTP_CLIENT_ERROR_WRITE_FAIL=4]="ARK_HTTP_CLIENT_ERROR_WRITE_FAIL",t[t.ARK_HTTP_CLIENT_ERROR_NETWORK_FAIL=5]="ARK_HTTP_CLIENT_ERROR_NETWORK_FAIL",t[t.ARK_HTTP_CLIENT_ERROR_FILE_NO_FOUND=7]="ARK_HTTP_CLIENT_ERROR_FILE_NO_FOUND",t[t.ARK_HTTP_CLIENT_ERROR_SERVER_ERROR=8]="ARK_HTTP_CLIENT_ERROR_SERVER_ERROR",t[t.ARK_HTTP_CLIENT_ERROR_CANCEL=9]="ARK_HTTP_CLIENT_ERROR_CANCEL",t[t.ARK_HTTP_CLIENT_ERROR_MD5_NOT_MATCH=11]="ARK_HTTP_CLIENT_ERROR_MD5_NOT_MATCH",t[t.ARK_HTTP_CLIENT_ERROR_DECOMPRESS_FAIL=12]="ARK_HTTP_CLIENT_ERROR_DECOMPRESS_FAIL",t[t.ARK_HTTP_CLIENT_ERROR_MOVE_FILE_FAIL=13]="ARK_HTTP_CLIENT_ERROR_MOVE_FILE_FAIL",t[t.ARK_HTTP_CLIENT_ERROR_TIMEOUT=21]="ARK_HTTP_CLIENT_ERROR_TIMEOUT",t[t.ARK_HTTP_CLIENT_ERROR_DNS_FAIL=22]="ARK_HTTP_CLIENT_ERROR_DNS_FAIL"}(Ht||(Ht={}));var Jt,Zt,$t,te,ee=new Map([[200,Ht.ARK_HTTP_CLIENT_ERROR_OK],[301,Ht.ARK_HTTP_CLIENT_ERROR_NOT_MODIFIED],[401,Ht.ARK_HTTP_CLIENT_ERROR_SERVER_CLOSE],[402,Ht.ARK_HTTP_CLIENT_ERROR_SERVER_CLOSE],[404,Ht.ARK_HTTP_CLIENT_ERROR_FILE_NO_FOUND],[503,Ht.ARK_HTTP_CLIENT_ERROR_SERVER_ERROR]]),ne=function(){function t(){}return t.GetErrorCode=function(t){return ee.get(t)||Ht.ARK_HTTP_CLIENT_ERROR_OTHER},t}(),re=["report.huatuo.qq.com"],oe=0;!function(t){t.ON_COMPLETE="OnComplete"}(Jt||(Jt={})),function(t){t.UNSPECIFIED="unspecified",t.NO_RESTRICTION="no_restriction",t.LAX="lax",t.STRICT="strict"}(Zt||(Zt={})),function(t){t.GET="Get",t.POST="Post"}($t||($t={})),function(t){t.TEXT="text/plain",t.JSON="application/json",t.XML="text/xml"}(te||(te={}));var ie,ae,se="Content-Type",ue=["https://otheve.beacon.qq.com","https://report.qqweb.qq.com","https://h5.qzone.qq.com/report/compass","https://report.vip.qq.com","https://h5.qzone.qq.com/report/action","https://report.gamecenter.qq.com","https://h5.qianbao.qq.com/maya/report","https://tianshu.qq.com/open/ts_report","https://q.qq.com/os/store/tsReport"],ce=k.getLogger("Http"),pe=function(t){function e(e){var n=t.call(this)||this;return n.url="",n.data="",n.interval=oe,n.headers={},n.method=$t.POST,n.isComplete=!1,n.isTimeout=!1,n.applicationId=$.GetApplicationId(e),ct.AddHttp(n.applicationId,n),n}return z(e,t),e.prototype.Get=function(t){var e=I(t);e?(this.url=e,this.data="",this.method=$t.GET,this.Send()):ce.error("invalid url:",t)},e.prototype.Post=function(t,e){var n=I(t);if(n){if(this.url=n,this.method=$t.POST,"string"==typeof e)this.data=e;else try{this.data=JSON.stringify(e)}catch(t){ce.error("Parse error.",t),this.data=String(e)}this.Send()}else ce.error("invalid url:",t)},e.prototype.IsSuccess=function(){var t=this.errorCode;return!(!this.IsComplete()||t!==Ht.ARK_HTTP_CLIENT_ERROR_OK&&t!==Ht.ARK_HTTP_CLIENT_ERROR_NOT_MODIFIED)},e.prototype.IsComplete=function(){return this.isComplete},e.prototype.GetHeader=function(t){var e;return(null===(e=this.headers)||void 0===e?void 0:e[t])||""},e.prototype.GetUrl=function(){return this.url},e.prototype.SetTimeout=function(t){this.interval=parseInt(String(t),10)||0},e.prototype.SetHeader=function(t,e){this.headers[t]=e},e.prototype.GetAppData=function(){var t=this.applicationId;return nt.GetApplication(t).GetApp()},e.prototype.Send=function(){return Y(this,void 0,void 0,(function(){var t,e,n,r,o,i,a,s=this;return X(this,(function(u){return e=(t=this).url,n=t.applicationId,r=t.interval,re.find((function(t){return-1!==e.indexOf(t)}))?(ce.warn("isBlackUrl:",e),[2]):lt.IsUnmounted(n)?(ce.warn("application is unmounted. applicationId:",n),[2]):(o=this.GetAppData(),$.CheckUrlLegality(o,this.url)?(r&&(this.timerId=setTimeout((function(){s.isComplete=!0,s.isTimeout=!0,s.Abort()}),r)),i=ue.find((function(t){return s.url.startsWith(t)})),a=function(){return Y(s,void 0,void 0,(function(){var t,e,n,r,o;return X(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.Request()];case 1:return t=i.sent(),e=t.status,n=t.success,r=n?Ht.ARK_HTTP_CLIENT_ERROR_OK:ne.GetErrorCode(e),this.errorCode=r,this.OnCompleteHandle(),[3,3];case 2:return o=i.sent(),ce.error("request error.",o),this.CatchErrorHandle(o),[3,3];case 3:return[2]}}))}))},i?(gt.isMainThread?window.requestIdleCallback(a):setTimeout((function(){a()})),[2]):(a(),[2])):(ce.error("url not legality. url:",this.url),[2]))}))}))},e.prototype.CatchErrorHandle=function(t){ce.error("request fail.",t),"AbortError"===(null==t?void 0:t.name)&&this.isTimeout?this.errorCode=Ht.ARK_HTTP_CLIENT_ERROR_TIMEOUT:this.errorCode=Ht.ARK_HTTP_CLIENT_ERROR_OTHER,this.OnCompleteHandle()},e.prototype.OnCompleteHandle=function(){var t=this.applicationId;this.isComplete=!0,this.CleanTimer(),ct.RemoveHttp(t,this),lt.IsUnmounted(t)?ce.warn("application is unmounted."):this.FireEvent(Jt.ON_COMPLETE,this)},e.prototype.CleanTimer=function(){this.timerId&&(clearTimeout(this.timerId),this.timerId=null)},e}(tt),le=function(){},he=1e3,fe=function(t){function e(){var e=t.call(this)||this;return e.interval=he,e.timerId=null,e}return z(e,t),e.prototype.SetInterval=function(t){this.interval!==t&&(this.interval=parseInt(String(t),10)||he,this.timerId&&(this.Stop(),this.Start()))},e.prototype.Start=function(){var t=this,e=this.interval;this.timerId=setInterval((function(){t.FireEvent("OnTimer",t),t.Stop()}),e)},e.prototype.Stop=function(){this.timerId&&(clearTimeout(this.timerId),this.timerId=null)},e}(tt);!function(t){t.ETHERNET="ethernet",t.WIFI="wifi",t.CELLULAR="cellular",t.OTHER="other",t.NONE="none"}(ie||(ie={})),function(t){t.POSITION="Position",t.MOTION="Motion",t.ORIENTATION="Orientation",t.CONNECTION_TYPE_CHANGE="ConnectionTypeChange"}(ae||(ae={}));var de,ge,Ee=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return z(e,t),e}(tt);!function(t){t.WINDOWS="Windows",t.ANDROID="Android",t.IOS="iOS",t.MAC="Mac",t.GUILD="Guild"}(de||(de={})),function(t){t.GUILD="Guild",t.QQ="QQ"}(ge||(ge={}));var ye=function(){function t(){}return t.prototype.Tick=function(){return Date.now()},t}(),Te=function(){},ve=function(){},Re=function(){},me=function(t,e){return me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},me(t,e)};function Ie(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}me(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Ne=function(){return Ne=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Ne.apply(this,arguments)};function Oe(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function _e(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}Object.create;function Ae(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ce(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function Se(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}Object.create;var we=k.getLogger("StorageUtil"),Le=function(){function t(){}return t.setItem=function(t,e){try{if(gt.isWorker)return void we.warn("not support localStorage");if(!window.localStorage)return;return window.localStorage.setItem(t,JSON.stringify(e)),!0}catch(n){return we.warn("setItem fail. name: ".concat(t,", value: ").concat(e)),!1}},t.getItem=function(t){try{if(gt.isWorker)return we.warn("not support localStorage"),"";if(!window.localStorage)return"";var e=window.localStorage.getItem(t);if(e)try{return JSON.parse(e)}catch(t){return we.warn("ParseError"),e}return e||""}catch(e){return we.error("getItem error. name: ".concat(t,", error: "),e),""}},t.removeItem=function(t){try{if(gt.isWorker)return void we.warn("not support localStorage");if(!window.localStorage)return;window.localStorage.removeItem(t)}catch(e){we.warn("removeItem fail. name: ".concat(t,", error:"),e)}},t.clear=function(){try{if(gt.isWorker)return void we.warn("not support localStorage");if(!window.localStorage)return;window.localStorage.clear()}catch(t){we.warn("clear() fail. error:",t)}},t}(),be=function(t,e){return be=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},be(t,e)};var Ge=function(){return Ge=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Ge.apply(this,arguments)};function Me(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function De(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}function Pe(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}var xe="backingStorePixelRatio",ke="webkitBackingStorePixelRatio",Ue=1;function He(){if(gt.isWorker)return 1;var t=document.createElement("canvas").getContext("2d"),e=t[xe]||t[ke]||1;return(window.devicePixelRatio||Ue)/e}var Ve="all",Fe={fillRect:Ve,clearRect:Ve,strokeRect:Ve,moveTo:Ve,lineTo:Ve,arc:[0,1,2],arcTo:Ve,bezierCurveTo:Ve,isPointInPath:Ve,isPointInStroke:Ve,quadraticCurveTo:Ve,rect:Ve,translate:Ve,createRadialGradient:Ve,createLinearGradient:Ve},We=function(){function t(){}return t.clipRect=function(t,e){t.beginPath(),t.rect(e.getLeft(),e.getTop(),e.Width(),e.Height()),t.clip(),t.closePath()},t.wrapperCanvas=function(t,e,n){var r,o=t.width,i=t.height;1!==n&&(t.width=o*n,t.height=i*n,t.style.width="".concat(o,"px"),t.style.height="".concat(i,"px"),e.clearRect=(r=e.clearRect,function(t,o,i,a){r.apply(e,[t*n,o*n,i*n,a*n])}))},t.wrapperCanvasRenderingContext2D=function(e,n){1!==e&&(Object.keys(Fe).forEach((function(t){var r;n[t]=(r=n[t],function(){for(var o,i,a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var u=Fe[t];if(u===Ve)a=a.map((function(t){return t*e}));else if(Array.isArray(u))try{for(var c=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(u),p=c.next();!p.done;p=c.next())a[p.value]*=e}catch(t){o={error:t}}finally{try{p&&!p.done&&(i=c.return)&&i.call(c)}finally{if(o)throw o.error}}r.apply(n,a)})})),t.wrapperStroke(e,n),t.wrapperFillText(e,n),t.wrapperStrokeText(e,n),t.wrapperDrawImage(e,n))},t.wrapperStroke=function(t,e){var n;e.stroke=(n=e.stroke,function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];e.lineWidth*=t,n.apply(e,r),e.lineWidth/=t})},t.wrapperFillText=function(t,e){var n;e.fillText=(n=e.fillText,function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];r[1]*=t,r[2]*=t,e.font=e.font.replace(/(\d+)(px|em|rem|pt)/g,(function(e,n,r){return n*t+r})),n.apply(e,r),e.font=e.font.replace(/(\d+)(px|em|rem|pt)/g,(function(e,n,r){return n/t+r}))})},t.wrapperStrokeText=function(t,e){var n,r=this;e.strokeText=(n=e.strokeText,function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];o[1]*=t,o[2]*=t,e.font=e.font.replace(/(\d+)(px|em|rem|pt)/g,(function(e,n,r){return n*t+r})),n.apply(r,o),e.font=e.font.replace(/(\d+)(px|em|rem|pt)/g,(function(e,n,r){return n/t+r}))})},t.wrapperDrawImage=function(t,e){var n;e.drawImage=(n=e.drawImage,function(r){for(var o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];(4!==(o=o.map((function(e){return e*t}))).length||0!==o[2]&&0!==o[3])&&n.apply(e,function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}([r],Pe(o),!1))})},t}(),Be=k.getLogger("CookieStorage");!function(){function t(){}t.setCookie=function(t,e,n){Be.debug(t,e,n),Le.setItem(t,{value:e,expirationDate:n?n.getTime():0})},t.getCookie=function(t){if(!t)return"";if(!("string"==typeof t?t.trim():String(t)))return"";var e=Le.getItem(t);if(!e)return"";if("string"==typeof e)return e;if("object"==typeof e){var n=e.value;if(e.expirationDate>=Date.now())return n}return""}}();var ze,Ye=/(Mac|iPhone|iPod|iPad)/i,Xe=/Linux/i;!function(t){t.MAC="Mac",t.LINUX="Linux",t.WINDOWS="Windows",t.UNKNOWN="PC"}(ze||(ze={}));var Ke=k.getLogger("Platform");function je(){try{return Ye.test(navigator.platform)?ze.MAC:Xe.test(navigator.platform)?ze.LINUX:ze.WINDOWS}catch(t){Ke.error("navigator.platform not supported")}return ze.UNKNOWN}var qe,Qe=function(){function t(){}return t.objectUrlToBlob=function(t){return Me(this,void 0,void 0,(function(){return De(this,(function(e){switch(e.label){case 0:return t?[4,fetch(t)]:[2,null];case 1:return[4,e.sent().blob()];case 2:return[2,e.sent()]}}))}))},t.load=function(t){var e=this;return new Promise((function(n,r){if(gt.isWorker)r(new Error("ENV_ERROR"));else{var o=I(t);fetch(o).then((function(o){return Me(e,void 0,void 0,(function(){var e,i,a,s=this;return De(this,(function(u){switch(u.label){case 0:return[4,o.blob()];case 1:return e=u.sent(),i=new Image,a=function(){i.onload=null,i.onerror=null,i=null},i.onload=function(){return Me(s,void 0,void 0,(function(){var t,r;return De(this,(function(o){return t=i.width,r=i.height,n({blob:e,width:t,height:r}),a(),[2]}))}))},i.onerror=function(t){r(t),a()},i.src=t,[2]}}))}))})).catch((function(t){r(t)}))}}))},t}(),Je=18e5,Ze=function(){function t(){}return t.set=function(e,n){e&&n&&(t.storeMap.set(e,{objectUrl:n,createTime:Date.now()}),this.clearExpiredImage())},t.get=function(e){if(!e)return"";var n=t.storeMap.get(e);return(null==n?void 0:n.objectUrl)||""},t.clearExpiredImage=function(){var e=this;t.timer||(t.timer=setTimeout((function(){t.storeMap.forEach((function(e,n){var r=e.createTime,o=e.objectUrl;Date.now()-r>=Je&&(t.storeMap.delete(n),URL.revokeObjectURL(o))})),t.timer=null,e.clearExpiredImage()}),Je))},t.storeMap=new Map,t}(),$e=0,tn="image/",en=k.getLogger("BaseHttp"),nn=function(t){function e(e){var n=t.call(this,e)||this;return n.status=$e,n.responseText="",n.cachePath="",n.cookies=[],n.controller=new AbortController,n.cookies=[],n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}be(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.GetCachePath=function(){return this.cachePath},e.prototype.PostForm=function(){throw new Error("Method not implemented")},e.prototype.SetCookie=function(t){var e=[];t.split(";").forEach((function(t){var n=Pe(t.split("="),2),r=n[0],o=n[1];r&&e.push({name:r.trim(),value:o})})),this.cookies=e},e.prototype.GetStatusCode=function(){return this.status},e.prototype.Abort=function(){var t=this.controller;t?t.signal.aborted?en.warn("request aborted."):(t.abort(),en.info("request aborted.")):en.warn("controller is null")},e.prototype.GetData=function(t){var e=this.responseText,n=t||this.GetHeader("Content-Type");if(!n)return this.responseText;if(-1!==n.toLowerCase().indexOf(te.JSON))try{return this.responseText&&"object"==typeof this.responseText?this.responseText:JSON.parse(this.responseText)}catch(t){return en.error("JSON.parse error.",t),{}}if(-1!==n.toLowerCase().indexOf(te.XML))try{return(new DOMParser).parseFromString(e,"text/xml")}catch(t){return en.error("XML Parser error.",t),null}return this.responseText},e.prototype.Request=function(){return Me(this,void 0,void 0,(function(){var t,e,n,r,o,i,a,s,u,c;return De(this,(function(p){switch(p.label){case 0:return e=(t=this).url,n=t.method,r=t.headers,o=t.data,(i=Ze.get(e))?(en.debug("hit image cache:",e,i),this.cachePath=i,[2,{status:200,success:!0}]):[4,this.SetApplicationCookie()];case 1:return p.sent(),[4,this.HttpProxy()];case 2:return p.sent()?[2]:(a={method:n,headers:r,credentials:"include"},n===$t.POST&&(a.body=o),[4,fetch(e,a)]);case 3:return s=p.sent(),this.IsImage(s)?[4,this.ImageStorage(s)]:[3,5];case 4:return p.sent(),[2,{status:s.status,success:s.ok}];case 5:return p.trys.push([5,8,,9]),s.ok?[4,s.text()]:[3,7];case 6:u=p.sent(),this.responseText=u,p.label=7;case 7:return[3,9];case 8:return c=p.sent(),this.responseText="",en.error("response.text() fail.",c),[3,9];case 9:return this.status=s.status,[2,{status:s.status,success:s.ok}]}}))}))},e.prototype.HttpProxy=function(){return Me(this,void 0,void 0,(function(){var t,e,n,r,o,i,a;return De(this,(function(s){switch(s.label){case 0:return t=this.GetApplicationContext(),"function"!=typeof(e=t.getHttpProxy())?[3,2]:(n=e(this.GetUrl()))&&"function"==typeof n.then?[4,n]:[3,2];case 1:return r=s.sent(),o=r.status,i=r.success,a=r.data,this.errorCode=Ht.ARK_HTTP_CLIENT_ERROR_OK,this.responseText=JSON.stringify(a),[2,{status:o,success:i}];case 2:return[2,!1]}}))}))},e.prototype.SetApplicationCookie=function(){return Me(this,void 0,void 0,(function(){var t,e,n,r,o,i,a;return De(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),t=this.GetApplicationContext(),n=(e=this).url,r=e.cookies,o=new URL(n),i=o.origin,[4,t.setCookie(r.map((function(t){return Ge({url:i},t)})))];case 1:return s.sent(),[3,3];case 2:return a=s.sent(),en.error("SetCookie error.",a),[3,3];case 3:return[2]}}))}))},e.prototype.IsImage=function(t){var e=this.GetHeader(se);if(null==e?void 0:e.toLowerCase().startsWith(tn))return!0;var n=t.headers.get(se);return!!(null==n?void 0:n.toLowerCase().startsWith(tn))},e.prototype.ImageStorage=function(t){return Me(this,void 0,void 0,(function(){var e,n,r;return De(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),en.debug("ImageStorage(response), response:",t),[4,t.blob()];case 1:return e=o.sent(),n=URL.createObjectURL(e),Ze.set(this.url,n),this.cachePath=n,[3,3];case 2:return r=o.sent(),en.error("ImageStorage fail.",r),[3,3];case 3:return[2]}}))}))},e}(pe);!function(t){t[t.ALIGN_AUTO=0]="ALIGN_AUTO",t[t.ALIGN_COUNT=8]="ALIGN_COUNT",t[t.ALIGN_FLEX_START=1]="ALIGN_FLEX_START",t[t.ALIGN_CENTER=2]="ALIGN_CENTER",t[t.ALIGN_FLEX_END=3]="ALIGN_FLEX_END",t[t.ALIGN_STRETCH=4]="ALIGN_STRETCH",t[t.ALIGN_BASELINE=5]="ALIGN_BASELINE",t[t.ALIGN_SPACE_BETWEEN=6]="ALIGN_SPACE_BETWEEN",t[t.ALIGN_SPACE_AROUND=7]="ALIGN_SPACE_AROUND",t[t.DIMENSION_COUNT=2]="DIMENSION_COUNT",t[t.DIMENSION_WIDTH=0]="DIMENSION_WIDTH",t[t.DIMENSION_HEIGHT=1]="DIMENSION_HEIGHT",t[t.DIRECTION_COUNT=3]="DIRECTION_COUNT",t[t.DIRECTION_INHERIT=0]="DIRECTION_INHERIT",t[t.DIRECTION_LTR=1]="DIRECTION_LTR",t[t.DIRECTION_RTL=2]="DIRECTION_RTL",t[t.DISPLAY_COUNT=2]="DISPLAY_COUNT",t[t.DISPLAY_FLEX=0]="DISPLAY_FLEX",t[t.DISPLAY_NONE=1]="DISPLAY_NONE",t[t.EDGE_COUNT=9]="EDGE_COUNT",t[t.EDGE_LEFT=0]="EDGE_LEFT",t[t.EDGE_TOP=1]="EDGE_TOP",t[t.EDGE_RIGHT=2]="EDGE_RIGHT",t[t.EDGE_BOTTOM=3]="EDGE_BOTTOM",t[t.EDGE_START=4]="EDGE_START",t[t.EDGE_END=5]="EDGE_END",t[t.EDGE_HORIZONTAL=6]="EDGE_HORIZONTAL",t[t.EDGE_VERTICAL=7]="EDGE_VERTICAL",t[t.EDGE_ALL=8]="EDGE_ALL",t[t.EXPERIMENTAL_FEATURE_COUNT=1]="EXPERIMENTAL_FEATURE_COUNT",t[t.EXPERIMENTAL_FEATURE_WEB_FLEX_BASIS=0]="EXPERIMENTAL_FEATURE_WEB_FLEX_BASIS",t[t.FLEX_DIRECTION_COUNT=4]="FLEX_DIRECTION_COUNT",t[t.FLEX_DIRECTION_COLUMN=0]="FLEX_DIRECTION_COLUMN",t[t.FLEX_DIRECTION_COLUMN_REVERSE=1]="FLEX_DIRECTION_COLUMN_REVERSE",t[t.FLEX_DIRECTION_ROW=2]="FLEX_DIRECTION_ROW",t[t.FLEX_DIRECTION_ROW_REVERSE=3]="FLEX_DIRECTION_ROW_REVERSE",t[t.JUSTIFY_COUNT=6]="JUSTIFY_COUNT",t[t.JUSTIFY_FLEX_START=0]="JUSTIFY_FLEX_START",t[t.JUSTIFY_CENTER=1]="JUSTIFY_CENTER",t[t.JUSTIFY_FLEX_END=2]="JUSTIFY_FLEX_END",t[t.JUSTIFY_SPACE_BETWEEN=3]="JUSTIFY_SPACE_BETWEEN",t[t.JUSTIFY_SPACE_AROUND=4]="JUSTIFY_SPACE_AROUND",t[t.JUSTIFY_SPACE_EVENLY=5]="JUSTIFY_SPACE_EVENLY",t[t.LOG_LEVEL_COUNT=6]="LOG_LEVEL_COUNT",t[t.LOG_LEVEL_ERROR=0]="LOG_LEVEL_ERROR",t[t.LOG_LEVEL_WARN=1]="LOG_LEVEL_WARN",t[t.LOG_LEVEL_INFO=2]="LOG_LEVEL_INFO",t[t.LOG_LEVEL_DEBUG=3]="LOG_LEVEL_DEBUG",t[t.LOG_LEVEL_VERBOSE=4]="LOG_LEVEL_VERBOSE",t[t.LOG_LEVEL_FATAL=5]="LOG_LEVEL_FATAL",t[t.MEASURE_MODE_COUNT=3]="MEASURE_MODE_COUNT",t[t.MEASURE_MODE_UNDEFINED=0]="MEASURE_MODE_UNDEFINED",t[t.MEASURE_MODE_EXACTLY=1]="MEASURE_MODE_EXACTLY",t[t.MEASURE_MODE_AT_MOST=2]="MEASURE_MODE_AT_MOST",t[t.NODE_TYPE_COUNT=2]="NODE_TYPE_COUNT",t[t.NODE_TYPE_DEFAULT=0]="NODE_TYPE_DEFAULT",t[t.NODE_TYPE_TEXT=1]="NODE_TYPE_TEXT",t[t.OVERFLOW_COUNT=3]="OVERFLOW_COUNT",t[t.OVERFLOW_VISIBLE=0]="OVERFLOW_VISIBLE",t[t.OVERFLOW_HIDDEN=1]="OVERFLOW_HIDDEN",t[t.OVERFLOW_SCROLL=2]="OVERFLOW_SCROLL",t[t.POSITION_TYPE_COUNT=2]="POSITION_TYPE_COUNT",t[t.POSITION_TYPE_RELATIVE=0]="POSITION_TYPE_RELATIVE",t[t.POSITION_TYPE_ABSOLUTE=1]="POSITION_TYPE_ABSOLUTE",t[t.PRINT_OPTIONS_COUNT=3]="PRINT_OPTIONS_COUNT",t[t.PRINT_OPTIONS_LAYOUT=1]="PRINT_OPTIONS_LAYOUT",t[t.PRINT_OPTIONS_STYLE=2]="PRINT_OPTIONS_STYLE",t[t.PRINT_OPTIONS_CHILDREN=4]="PRINT_OPTIONS_CHILDREN",t[t.UNIT_COUNT=4]="UNIT_COUNT",t[t.UNIT_UNDEFINED=0]="UNIT_UNDEFINED",t[t.UNIT_POINT=1]="UNIT_POINT",t[t.UNIT_PERCENT=2]="UNIT_PERCENT",t[t.UNIT_AUTO=3]="UNIT_AUTO",t[t.WRAP_COUNT=3]="WRAP_COUNT",t[t.WRAP_NO_WRAP=0]="WRAP_NO_WRAP",t[t.WRAP_WRAP=1]="WRAP_WRAP",t[t.WRAP_WRAP_REVERSE=2]="WRAP_WRAP_REVERSE"}(qe||(qe={}));var rn=function(){function t(){}return t.AddUIObject=function(e,n){if(!e||!n)return!1;t.nodeMap.set(e,n)},t.GetUIObject=function(e){return e?t.nodeMap.get(e):null},t.RemoveUIObject=function(e){e&&t.nodeMap.delete(e)},t.nodeMap=new Map,t}(),on={unit:qe.UNIT_UNDEFINED,value:0};var an=k.getLogger("Calculate"),sn=function(){function t(){}return t.cal=function(t){return an.warn("value:",t),on},t}(),un=.75,cn=375,pn=667;function ln(t){var e=+t;return T(e)?v(e)?0:e*un:0}function hn(t){var e=+t;return T(e)?v(e)?0:e/100*cn:0}function fn(t){var e=+t;return T(e)?v(e)?0:e/100*pn:0}var dn,gn=k.getLogger("ConvertToValue"),En=function(){function t(){}return t.stringToYogaValue=function(t){if(T(t))return{unit:qe.UNIT_POINT,value:t};if("string"!=typeof t)return on;if(!t.trim())return on;if(-1!==t.indexOf("calc"))return sn.cal(t);if("auto"===t)return{unit:qe.UNIT_AUTO,value:10};if(t.endsWith("%")){var e=+t.substring(0,t.length-1);return v(e)&&(gn.warn("invalid percent value:",t),e=0),{unit:qe.UNIT_PERCENT,value:e}}if(t.endsWith("pt")){var n=+t.substring(0,t.length-2);return v(n)?(gn.warn("invalid point value:",t),on):{unit:qe.UNIT_POINT,value:ln(n)}}if(t.endsWith("vw")){var r=+t.substring(0,t.length-2);return v(r)?(gn.warn("invalid vw value:",t),on):{unit:qe.UNIT_POINT,value:hn(r)}}if(t.endsWith("vh")){var o=+t.substring(0,t.length-2);return v(o)?(gn.warn("invalid vh value:",t),on):{unit:qe.UNIT_POINT,value:fn(o)}}if(t.endsWith("px")){var i=+t.substring(0,t.length-2);return v(i)?(gn.warn("invalid pixel value:",t),on):{unit:qe.UNIT_POINT,value:i}}var a=+t;return v(a)?(gn.warn("invalid value:",t),on):{unit:qe.UNIT_POINT,value:a}},t}(),yn=k.getLogger("YogaNode"),Tn=function(){function t(t){this.yogaNode=t}return t.prototype.setUnitProps=function(t,e){var n=mn.Yoga,r=En.stringToYogaValue(e),o=r.unit,i=r.value,a=n.Constants;switch(o){case qe.UNIT_AUTO:this.yogaNode[t]={value:i,unit:a.unit.auto};break;case qe.UNIT_PERCENT:this.yogaNode[t]={value:i,unit:a.unit.percent};break;case qe.UNIT_POINT:this.yogaNode[t]={value:i,unit:a.unit.point}}},t.prototype.setAlign=function(t,e){var n=mn.Yoga;switch(e){case qe.ALIGN_STRETCH:this.yogaNode[t]=n.Constants.align.stretch;break;case qe.ALIGN_FLEX_START:this.yogaNode[t]=n.Constants.align["flex-start"];break;case qe.ALIGN_FLEX_END:this.yogaNode[t]=n.Constants.align["flex-end"];break;case qe.ALIGN_CENTER:this.yogaNode[t]=n.Constants.align.center;break;case qe.ALIGN_AUTO:this.yogaNode[t]=n.Constants.align.auto;break;case qe.ALIGN_SPACE_BETWEEN:this.yogaNode[t]=n.Constants.align["space-between"];break;case qe.ALIGN_SPACE_AROUND:this.yogaNode[t]=n.Constants.align["space-around"];break;case qe.ALIGN_BASELINE:this.yogaNode[t]=n.Constants.align.baseline}},t.prototype.setWidth=function(t){this.setUnitProps(d.WIDTH,t)},t.prototype.setHeight=function(t){this.setUnitProps(d.HEIGHT,t)},t.prototype.setMinWidth=function(t){this.setUnitProps(d.MIN_WIDTH,t)},t.prototype.setMaxWidth=function(t){this.setUnitProps(d.MAX_WIDTH,t)},t.prototype.setMinHeight=function(t){this.setUnitProps(d.MIN_HEIGHT,t)},t.prototype.setMaxHeight=function(t){this.setUnitProps(d.MAX_HEIGHT,t)},t.prototype.setMargin=function(t,e){switch(t){case qe.EDGE_LEFT:this.setUnitProps(d.MARGIN_LEFT,e);break;case qe.EDGE_TOP:this.setUnitProps(d.MARGIN_TOP,e);break;case qe.EDGE_RIGHT:this.setUnitProps(d.MARGIN_RIGHT,e);break;case qe.EDGE_BOTTOM:this.setUnitProps(d.MARGIN_BOTTOM,e)}},t.prototype.setPadding=function(t,e){switch(t){case qe.EDGE_LEFT:this.setUnitProps(d.PADDING_LEFT,e);break;case qe.EDGE_TOP:this.setUnitProps(d.PADDING_TOP,e);break;case qe.EDGE_RIGHT:this.setUnitProps(d.PADDING_RIGHT,e);break;case qe.EDGE_BOTTOM:this.setUnitProps(d.PADDING_BOTTOM,e)}},t.prototype.setPosition=function(t,e){var n=this,r=En.stringToYogaValue(e),o=mn.Yoga,i=function(t){switch(r.unit){case qe.UNIT_PERCENT:n.yogaNode[t]={value:r.value,unit:o.Constants.unit.percent};break;case qe.UNIT_POINT:n.yogaNode[t]={value:r.value,unit:o.Constants.unit.point}}};switch(t){case qe.EDGE_LEFT:i(d.LEFT);break;case qe.EDGE_TOP:i(d.TOP);break;case qe.EDGE_RIGHT:i(d.RIGHT);break;case qe.EDGE_BOTTOM:i(d.BOTTOM)}},t.prototype.setBorder=function(t,e){var n=this,r=En.stringToYogaValue(e),o=mn.Yoga,i=function(t){if(r.unit===qe.UNIT_POINT)n.yogaNode[t]={value:r.value,unit:o.Constants.unit.point}};switch(t){case qe.EDGE_LEFT:i(d.BORDER_LEFT_WIDTH);break;case qe.EDGE_TOP:i(d.BORDER_TOP_WIDTH);break;case qe.EDGE_RIGHT:i(d.BORDER_RIGHT_WIDTH);break;case qe.EDGE_BOTTOM:i(d.BORDER_BOTTOM_WIDTH)}},t.prototype.setPositionType=function(t){var e=mn.Yoga;switch(t){case qe.POSITION_TYPE_RELATIVE:this.yogaNode[d.POSITION]=e.Constants.position.relative;break;case qe.POSITION_TYPE_ABSOLUTE:this.yogaNode[d.POSITION]=e.Constants.position.absolute}},t.prototype.setDisplay=function(t){var e=mn.Yoga;switch(t){case qe.DISPLAY_FLEX:this.yogaNode[d.DISPLAY]=e.Constants.display.flex;break;case qe.DISPLAY_NONE:this.yogaNode[d.DISPLAY]=e.Constants.display.none}},t.prototype.setFlexDirection=function(t){var e=mn.Yoga;switch(t){case qe.FLEX_DIRECTION_COLUMN:this.yogaNode[d.FLEX_DIRECTION]=e.Constants.flexDirection.column;break;case qe.FLEX_DIRECTION_COLUMN_REVERSE:this.yogaNode[d.FLEX_DIRECTION]=e.Constants.flexDirection["column-reverse"];break;case qe.FLEX_DIRECTION_ROW:this.yogaNode[d.FLEX_DIRECTION]=e.Constants.flexDirection.row;break;case qe.FLEX_DIRECTION_ROW_REVERSE:this.yogaNode[d.FLEX_DIRECTION]=e.Constants.flexDirection["row-reverse"]}},t.prototype.setJustifyContent=function(t){var e=mn.Yoga;switch(t){case qe.JUSTIFY_CENTER:this.yogaNode[d.JUSTIFY_CONTENT]=e.Constants.justify.center;break;case qe.JUSTIFY_FLEX_END:this.yogaNode[d.JUSTIFY_CONTENT]=e.Constants.justify["flex-end"];break;case qe.JUSTIFY_SPACE_AROUND:this.yogaNode[d.JUSTIFY_CONTENT]=e.Constants.justify["space-around"];break;case qe.JUSTIFY_FLEX_START:this.yogaNode[d.JUSTIFY_CONTENT]=e.Constants.justify["flex-start"];break;case qe.JUSTIFY_SPACE_BETWEEN:this.yogaNode[d.JUSTIFY_CONTENT]=e.Constants.justify["space-between"];break;case qe.JUSTIFY_SPACE_EVENLY:this.yogaNode[d.JUSTIFY_CONTENT]=e.Constants.justify["space-evenly"]}},t.prototype.setAlignItems=function(t){this.setAlign(d.ALIGN_ITEMS,t)},t.prototype.setAlignContent=function(t){this.setAlign(d.ALIGN_CONTENT,t)},t.prototype.setAlignSelf=function(t){this.setAlign(d.ALIGN_SELF,t)},t.prototype.setFlexWrap=function(t){var e=mn.Yoga;switch(t){case qe.WRAP_NO_WRAP:this.yogaNode[d.FLEX_WARP]=e.Constants.wrap.nowrap;break;case qe.WRAP_WRAP:this.yogaNode[d.FLEX_WARP]=e.Constants.wrap.wrap;break;case qe.WRAP_WRAP_REVERSE:this.yogaNode[d.FLEX_WARP]=e.Constants.wrap["wrap-reverse"]}},t.prototype.setFlexGrow=function(t){this.yogaNode[d.FLEX_GROW]=t},t.prototype.setFlexShrink=function(t){this.yogaNode[d.FLEX_SHRINK]=t},t.prototype.setFlexBasis=function(t){this.setUnitProps(d.FLEX_BASIS,t)},t.prototype.getWidth=function(){return this.yogaNode.width},t.prototype.getHeight=function(){return this.yogaNode.height},t.prototype.unsetMeasureFunc=function(){try{this.yogaNode.unsetMeasureFunc(),this.removeEmvalHandleArrayElement()}catch(t){yn.error("unsetMeasureFunc() error.",t)}},t.prototype.setMeasureFunc=function(t){var e=this.yogaNode;mn.Yoga&&"function"==typeof t&&(this.removeEmvalHandleArrayElement(),this.measureFuncIndex=e.setMeasureFunc(t))},t.prototype.markDirty=function(){this.yogaNode.markDirty()},t.prototype.free=function(){try{this.yogaNode.free()}catch(t){yn.error("free() error.",t)}},t.prototype.freeRecursive=function(){try{this.yogaNode.freeRecursive()}catch(t){yn.error("freeRecursive() error.",t)}},t.prototype.getParent=function(){return this.yogaNode.getParent()},t.prototype.insertChild=function(t,e){this.yogaNode.insertChild(t.yogaNode,e)},t.prototype.calculateLayout=function(t,e,n){this.yogaNode.calculateLayout(t,e,n)},t.prototype.removeChild=function(t){this.yogaNode.removeChild(t.yogaNode)},t.prototype.getComputedLayout=function(){var t=this.yogaNode.getComputedLayout(),e=t.left,n=t.top,r=t.width,o=t.height;return{left:e,top:n,right:e+r,bottom:n+o,width:r,height:o}},t.prototype.release=function(){this.unsetMeasureFunc(),this.free()},t.prototype.getYogaNode=function(){return this.yogaNode},t.prototype.removeEmvalHandleArrayElement=function(){var t=mn.Yoga,e=this.measureFuncIndex;if(t&&(e||0===e)){var n=t.RemoveEmval;if("function"==typeof n)try{n(e)}catch(t){yn.error("remove emval_handle_array fail",t)}}},t}(),vn=k.getLogger("YogaBridge"),Rn=function(){function t(t){var e=t.Node,n=t.Config,r=t.Constants,o=t.RemoveEmval;this.Node=e,this.Config=n,this.Constants=r,this.RemoveEmval=o}return t.init=function(){return Oe(this,void 0,void 0,(function(){var e;return _e(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,i.default];case 1:return[2,new t(n.sent())];case 2:return e=n.sent(),vn.error("initYoga error.",e),[2,Promise.reject(e)];case 3:return[2]}}))}))},t.prototype.createNodeWithDefaultConfig=function(){var t=this.Config,e=this.Node,n=new t,r=e.createWithConfig(n);return new Tn(r)},t}(),mn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ie(e,t),e.initYoga=function(){return Oe(this,void 0,void 0,(function(){var t;return _e(this,(function(n){switch(n.label){case 0:return e.Yoga?[2,e.Yoga]:[4,Rn.init()];case 1:return t=n.sent(),e.Yoga=t,[2,t]}}))}))},e.engineVersion="v_20230210131052",e}(wt);!function(t){t.FLEX="flex",t.NONE="none",t.BLOCK="block",t.INLINE="inline",t.INLINE_BLOCK="inline-block"}(dn||(dn={}));var In,Nn=function(){function t(){}return t.toYoga=function(t){switch(t){case dn.FLEX:return qe.DISPLAY_FLEX;case dn.NONE:return qe.DISPLAY_NONE;default:return qe.DISPLAY_FLEX}},t}();!function(t){t.AUTO="auto",t.FLEX_START="flex-start",t.FLEX_END="flex-end",t.CENTER="center",t.SPACE_BETWEEN="space-between",t.SPACE_AROUND="space-around",t.STRETCH="stretch",t.BASELINE="baseline"}(In||(In={}));var On,_n=function(){function t(){}return t.toYoga=function(t){switch(t){case In.STRETCH:return qe.ALIGN_STRETCH;case In.FLEX_START:return qe.ALIGN_FLEX_START;case In.FLEX_END:return qe.ALIGN_FLEX_END;case In.CENTER:return qe.ALIGN_CENTER;case In.AUTO:return qe.ALIGN_AUTO;case In.SPACE_BETWEEN:return qe.ALIGN_SPACE_BETWEEN;case In.SPACE_AROUND:return qe.ALIGN_SPACE_AROUND;case In.BASELINE:return qe.ALIGN_BASELINE;default:return qe.ALIGN_STRETCH}},t}(),An=function(){function t(){}return t.toYoga=function(t){return _n.toYoga(t)},t}();!function(t){t.COLUMN="column",t.COLUMN_REVERSE="column-reverse",t.ROW="row",t.ROW_REVERSE="row-reverse"}(On||(On={}));var Cn,Sn=function(){function t(){}return t.toYoga=function(t){switch(t){case On.COLUMN:return qe.FLEX_DIRECTION_COLUMN;case On.COLUMN_REVERSE:return qe.FLEX_DIRECTION_COLUMN_REVERSE;case On.ROW:return qe.FLEX_DIRECTION_ROW;case On.ROW_REVERSE:return qe.FLEX_DIRECTION_ROW_REVERSE;default:return qe.FLEX_DIRECTION_ROW}},t}();!function(t){t.FLEX_START="flex-start",t.FLEX_END="flex-end",t.CENTER="center",t.SPACE_BETWEEN="space-between",t.SPACE_AROUND="space-around",t.SPACE_EVENLY="space-evenly"}(Cn||(Cn={}));var wn,Ln=function(){function t(){}return t.toYoga=function(t){switch(t){case Cn.CENTER:return qe.JUSTIFY_CENTER;case Cn.FLEX_END:return qe.JUSTIFY_FLEX_END;case Cn.SPACE_AROUND:return qe.JUSTIFY_SPACE_AROUND;case Cn.FLEX_START:return qe.JUSTIFY_FLEX_START;case Cn.SPACE_BETWEEN:return qe.JUSTIFY_SPACE_BETWEEN;case Cn.SPACE_EVENLY:return qe.JUSTIFY_SPACE_EVENLY;default:return qe.JUSTIFY_FLEX_START}},t}();!function(t){t.RELATIVE="relative",t.ABSOLUTE="absolute",t.STATIC="static"}(wn||(wn={}));var bn,Gn=function(){function t(){}return t.toYoga=function(t){return t===wn.ABSOLUTE?qe.POSITION_TYPE_ABSOLUTE:qe.POSITION_TYPE_RELATIVE},t}();!function(t){t.WRAP="wrap",t.NOWRAP="nowrap",t.WRAP_REVERSE="wrap_reverse"}(bn||(bn={}));var Mn,Dn,Pn=function(){function t(){}return t.toYoga=function(t){switch(t){case bn.NOWRAP:return qe.WRAP_NO_WRAP;case bn.WRAP:return qe.WRAP_WRAP;case bn.WRAP_REVERSE:return qe.WRAP_WRAP_REVERSE;default:return qe.WRAP_NO_WRAP}},t}(),xn=function(t){return null===t},kn=function(t){return!function(t){return void 0===t}(t)&&(!xn(t)&&("string"!=typeof t||0!==t.trim().length))},Un=function(){function t(){}return t.parser=function(t){if(!t)return{top:void 0,right:void 0,bottom:void 0,left:void 0};var e=t.split(" ");return 1===e.length?{top:e[0],right:e[0],bottom:e[0],left:e[0]}:2===e.length?{top:e[0],right:e[1],bottom:e[0],left:e[1]}:3===e.length?{top:e[0],right:e[1],bottom:e[2],left:e[1]}:4===e.length?{top:e[0],right:e[1],bottom:e[2],left:e[3]}:void 0},t}(),Hn=function(){function t(){}return t.parser=function(t){if(!t)return{top:"0px",right:"0px",bottom:"0px",left:"0px"};var e=t.split(" ");return 1===e.length?{top:e[0],right:e[0],bottom:e[0],left:e[0]}:2===e.length?{top:e[0],right:e[1],bottom:e[0],left:e[1]}:3===e.length?{top:e[0],right:e[1],bottom:e[2],left:e[1]}:4===e.length?{top:e[0],right:e[1],bottom:e[2],left:e[3]}:void 0},t}(),Vn=function(){function t(){}return t.parser=function(t){if(!t)return null;var e=[],n=null,r=null,o=null;switch(t){case"auto":return{flexGrow:1,flexShrink:1,flexBasis:"auto"};case"none":return{flexGrow:0,flexShrink:0,flexBasis:"auto"};default:return(e=String(t).split(" ")).length>0&&(n=parseInt(e[0],10)||null),e.length>1&&(r=parseInt(e[1],10)||null),e.length>2&&(o=e[2]),{flexGrow:n,flexShrink:r,flexBasis:o}}},t}(),Fn=function(){function t(){}return t.toYoga=function(t){return _n.toYoga(t)},t}(),Wn=function(){function t(){}return t.toYoga=function(t){return _n.toYoga(t)},t}(),Bn=k.getLogger("CSSLayoutNode"),zn=function(){function t(t){var e=this;this.YGMeasureAutoSizeFunc=function(t,n,r){return function(t,e,n,r){var o=rn.GetUIObject(t);if(!o)return{width:0,height:0};var i={width:NaN,height:NaN},a=t.width,s=t.height;switch(a.unit.value){case qe.UNIT_PERCENT:i.width=e/100*a.value;break;case qe.UNIT_POINT:i.width=a.value}switch(s.unit.value){case qe.UNIT_PERCENT:i.height=r/100*s.value;break;case qe.UNIT_POINT:i.height=s.value}if(o.IsType(_t.IMAGE)){var u=o.MeasureSize();Number.isNaN(i.width)&&Number.isNaN(i.height)?(i.width=u.GetWidth(),i.height=u.GetHeight()):Number.isNaN(i.width)?0!==u.GetHeight()?i.width=u.GetWidth()/u.GetHeight()*i.height:i.width=0:Number.isNaN(i.height)&&(0!==u.GetWidth()?i.height=u.GetHeight()/u.GetWidth()*i.width:i.height=0)}else o.IsType(_t.TEXT)&&(u=new Pt,Number.isNaN(i.width)||u.SetWidth(i.width),Number.isNaN(i.height)||u.SetHeight(i.height),u=o.MeasureSize(u),Number.isNaN(i.width)&&(i.width=u.GetWidth()),Number.isNaN(i.height)&&(i.height=u.GetHeight()));return i}(e.layoutNode.getYogaNode(),t,0,r)},this.styles={},this.isBox=!1,this.layoutNode=mn.Yoga.createNodeWithDefaultConfig();var n=this.layoutNode.getYogaNode();switch(rn.AddUIObject(n,t),t.GetNodeType()){case _t.IMAGE:case _t.TEXT:this.layoutNode.setMeasureFunc(this.YGMeasureAutoSizeFunc)}}return t.prototype.GetUIObject=function(){var t=this.layoutNode.getYogaNode();return rn.GetUIObject(t)},t.prototype.GetApp=function(){var t=this.GetUIObject().GetApplicationId();return nt.GetApplication(t).GetApp()},t.prototype.GetStyle=function(t){var e,n=this.styles;return t&&0!==t.length?(null===(e=this.styles)||void 0===e?void 0:e[t])||"":Object.keys(n).map((function(t){return"".concat(t,":").concat(n[t])})).join(";")},t.prototype.SetStyle=function(t,e){return!!t&&(void 0===e?function(t){if(!t)return!1;var e=t.split(":");return e.length>=2&&!(!e[0].length||!e[1].length)}(t)?this.SetStyleByStyleString(t):this.SetStyleByClassName(t):!(!t||!e)&&(this.styles[t]=e,this.LoadStyle(),!0))},t.prototype.IsBox=function(){return this.isBox},t.prototype.MarkDirty=function(){this.layoutNode.markDirty()},t.prototype.GetParent=function(){if(this.layoutNode.getParent()){var t=this.GetUIObject().GetParent();if(t)return t.GetCSSLayoutNode()}return null},t.prototype.GetRoot=function(){var t=this.layoutNode.getParent();if(!t)return this.layoutNode;for(;t.getParent();)t=t.getParent();return t},t.prototype.InsertChild=function(t,e){Bn.debug("InsertChild","parent:",this.GetUIObject(),"child:",t.GetUIObject()),this.layoutNode.insertChild(t.GetLayoutNode(),e)},t.prototype.RemoveChild=function(t){t.GetLayoutNode()&&this.layoutNode.removeChild(t.GetLayoutNode())},t.prototype.GetLayoutNode=function(){return this.layoutNode},t.prototype.CalculateLayout=function(){try{this.layoutNode.calculateLayout(NaN,NaN,qe.DIRECTION_LTR)}catch(e){Bn.error("CalculateLayout fail",e);var t=this.GetApp();Qa.error(t,Ba.ARK_LAYOUT_ERROR,e)}},t.prototype.GetLayoutRect=function(){var t=this.layoutNode.getComputedLayout(),e=t.left,n=t.right,r=t.top,o=t.bottom;return new Kt(e||0,r||0,n||0,o||0)},t.prototype.GetLayoutSize=function(){var t=this.layoutNode.getComputedLayout(),e=t.width,n=t.height;return new Pt(e||0,n||0)},t.prototype.Release=function(){var t=this.layoutNode.getYogaNode();this.layoutNode.release(),rn.RemoveUIObject(t)},t.prototype.SetStyleByClassName=function(t){var e=this,n=t.split(" "),r=this.GetApp(),o=$.GetStyles(r);return n.forEach((function(t){if(t.trim()){var n=o[t.trim()];n&&Object.keys(n).forEach((function(t){e.styles[t]=n[t]}))}})),this.LoadStyle(),!0},t.prototype.SetStyleByStyleString=function(t){var e=this,n=t.split(";"),r=!1;return n.forEach((function(t){var n=Ce(t.split(":"),2),o=n[0],i=n[1];(null==o?void 0:o.trim())&&(null==i?void 0:i.trim())&&(e.styles[o.trim()]=i.trim(),r=!0)})),r&&this.LoadStyle(),!0},t.prototype.LoadStyle=function(){this.ResetStyle();var t=this.styles,e=t.display;e&&(Nn.toYoga(e)===qe.DISPLAY_FLEX&&(this.isBox=!0));var n=this.layoutNode,r=t.display,o=t.width,i=t.height,a=t.minWidth,s=t.maxWidth,u=t.minHeight,c=t.maxHeight,p=t.flexDirection,l=t.justifyContent,h=t.alignContent,f=t.alignItems,d=t.flexWrap,g=t.alignSelf;kn(o)&&n.setWidth(o),kn(i)&&n.setHeight(i),kn(a)&&n.setMinWidth(a),kn(s)&&n.setMaxWidth(s),kn(u)&&n.setMinHeight(u),kn(c)&&n.setMaxHeight(c),kn(r)&&n.setDisplay(Nn.toYoga(t.display)),kn(p)&&n.setFlexDirection(Sn.toYoga(p)),kn(l)&&n.setJustifyContent(Ln.toYoga(l)),kn(f)&&n.setAlignItems(An.toYoga(f)),kn(h)&&n.setAlignContent(Fn.toYoga(h)),kn(g)&&n.setAlignSelf(Wn.toYoga(g)),kn(d)&&n.setFlexWrap(Pn.toYoga(t.flexWrap)),this.SetFlex(),this.SetMargin(),this.SetPadding(),this.SetPosition(),this.SetBorder()},t.prototype.ResetStyle=function(){this.layoutNode.setFlexDirection(qe.FLEX_DIRECTION_ROW),this.layoutNode.setFlexWrap(qe.WRAP_NO_WRAP),this.layoutNode.setJustifyContent(qe.JUSTIFY_FLEX_START),this.layoutNode.setAlignItems(qe.ALIGN_STRETCH),this.layoutNode.setAlignContent(qe.ALIGN_STRETCH),this.layoutNode.setFlexGrow(0),this.layoutNode.setFlexShrink(1)},t.prototype.SetMargin=function(){var t=this.styles,e=this.layoutNode,n=t.marginLeft,r=t.marginRight,o=t.marginBottom,i=t.marginTop;if(t.margin){var a=Un.parser(t.margin);e.setMargin(qe.EDGE_LEFT,a.left),e.setMargin(qe.EDGE_RIGHT,a.right),e.setMargin(qe.EDGE_BOTTOM,a.bottom),e.setMargin(qe.EDGE_TOP,a.top)}kn(n)&&e.setMargin(qe.EDGE_LEFT,n),kn(r)&&e.setMargin(qe.EDGE_RIGHT,r),kn(o)&&e.setMargin(qe.EDGE_BOTTOM,o),kn(i)&&e.setMargin(qe.EDGE_TOP,i)},t.prototype.SetPadding=function(){var t=this.styles,e=this.layoutNode,n=t.paddingLeft,r=t.paddingRight,o=t.paddingBottom,i=t.paddingTop;if(t.padding){var a=Hn.parser(t.padding);e.setPadding(qe.EDGE_LEFT,a.left),e.setPadding(qe.EDGE_RIGHT,a.right),e.setPadding(qe.EDGE_BOTTOM,a.bottom),e.setPadding(qe.EDGE_TOP,a.top)}kn(n)&&e.setPadding(qe.EDGE_LEFT,n),kn(r)&&e.setPadding(qe.EDGE_RIGHT,r),kn(o)&&e.setPadding(qe.EDGE_BOTTOM,o),kn(i)&&e.setPadding(qe.EDGE_TOP,i)},t.prototype.SetFlex=function(){var t=this.styles,e=this.layoutNode,n=function(t,n,r){var o=+t;if(kn(o)&&(v(o)||e.setFlexGrow(o)),kn(n)){var i=+n;v(i)||e.setFlexShrink(i)}if(kn(r))if("auto"===r)try{e.setFlexBasis("auto")}catch(t){Bn.error(t)}else e.setFlexBasis(r)};if(n(t.flexGrow,t.flexShrink,t.flexBasis),t.flex){var r=Vn.parser(t.flex);r&&n(r.flexGrow,r.flexShrink,r.flexBasis)}},t.prototype.SetPosition=function(){var t=this.styles,e=this.layoutNode,n=t.left,r=t.top,o=t.right,i=t.bottom;if(kn(t.position)){var a=Gn.toYoga(t.position);e.setPositionType(a)}kn(n)&&e.setPosition(qe.EDGE_LEFT,n),kn(o)&&e.setPosition(qe.EDGE_RIGHT,o),kn(i)&&e.setPosition(qe.EDGE_BOTTOM,i),kn(r)&&e.setPosition(qe.EDGE_TOP,r)},t.prototype.SetBorder=function(){var t=this.styles,e=this.layoutNode,n=t.borderLeftWidth,r=t.borderTopWidth,o=t.borderBottomWidth,i=t.borderRightWidth;kn(n)&&e.setBorder(qe.EDGE_LEFT,n),kn(i)&&e.setBorder(qe.EDGE_RIGHT,i),kn(o)&&e.setBorder(qe.EDGE_BOTTOM,o),kn(r)&&e.setBorder(qe.EDGE_TOP,r)},t}();!function(t){t.CSS_LAYOUT="CSSLayout",t.DOCK_LAYOUT="DockLayout",t.LIST_LAYOUT="ListLayout",t.NORMAL_LAYOUT="NormalLayout"}(Mn||(Mn={})),function(t){t.TYPE="type"}(Dn||(Dn={}));var Yn=function(){function t(){}return t.prototype.isCSSLayout=function(){return this.GetName()===Mn.CSS_LAYOUT},t.prototype.isNormalLayout=function(){return this.GetName()===Mn.NORMAL_LAYOUT},t.prototype.SetObjectMargin=function(t,e){t.SetMargin(e.getLeft(),e.getTop(),e.getRight(),e.getBottom(),!1)},t.prototype.SetObjectRect=function(t,e){t.SetRect(e.getLeft(),e.getTop(),e.getRight(),e.getBottom(),!1)},t.tagName="LAYOUT",t}(),Xn=k.getLogger("CSSLayout"),Kn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ie(e,t),e.prototype.GetName=function(){return Mn.CSS_LAYOUT},e.prototype.InitParameters=function(t){Xn.debug("InitParameters:",t)},e.prototype.DoLayout=function(t){t?t.IsType(_t.VIEW)?(Xn.debug("DoLayout",t,t.GetID()),t.DoCSSLayout(),t.children.forEach((function(t){t.DoCSSLayout()}))):Xn.warn("must be WebView"):Xn.warn("pView not null")},e.prototype.UpdateRect=function(t){if(Xn.debug("CSSLayout UpdateRect:",t.GetID()),t){var e=t.GetParent();this.DoLayout(e)}else Xn.warn("child not null")},e.prototype.UpdateMargin=function(t,e){Xn.debug("UpdateMargin:",t,e)},e}(Yn);function jn(t){var e=qn(t);return 4===e.length?{left:parseInt(e[0],10)||0,top:parseInt(e[1],10)||0,right:parseInt(e[2],10)||0,bottom:parseInt(e[3],10)||0}:null}function qn(t){return"string"==typeof t&&t?t.split(",").map((function(t){return t.trim()})).filter((function(t){return t.length>0})):[]}var Qn,Jn=k.getLogger("WebUIObject"),Zn="parent",$n="cssLayoutNode",tr=function(t){function e(e){var n=t.call(this,e)||this;return n.lockUpdate=0,n.renderRect=null,n.isRoot=!1,n.position=Xt.EmptyPoint,n.renderRect=new Kt,n.children=[],n.isRoot=!1,n.isVisible=!0,n.radius=Kt.EmptyRect,n.margin=Kt.EmptyRect,n.anchors=Vt,n.alpha=Ft,n.enable=!0,n.metadataType="",n}return Ie(e,t),e.prototype.IsCSSMode=function(){var t=this.GetCSSLayoutNode();return Boolean(t)&&"function"==typeof t.SetStyle},e.prototype.GetCSSLayoutNode=function(){return this[$n]},e.prototype.SetParent=function(t){Object.defineProperty(this,Zn,{value:t,enumerable:!1,writable:!0,configurable:!1})},e.prototype.GetParent=function(){return this[Zn]},e.prototype.GetPos=function(){return this.position.Copy()},e.prototype.SetPos=function(t,e){var n,r=new Xt(t,e);if(Number.isNaN(r.getX())||Number.isNaN(r.getY()))Jn.warn("warning: invalid size for SetPos, id=".concat(this.GetID(),", type=GetType, pos=(").concat(r.getX(),", ").concat(r.getY(),")"));else if(!this.IsCSSMode()&&r&&(null===(n=this.position)||void 0===n?void 0:n.isNotEqual(r))){var o=this.position.Copy();this.position=r,this.DoMove(o,r.Copy()),this.UpdateMargin()}},e.prototype.GetSize=function(){return this.size.Copy()},e.prototype.SetSize=function(t,e){if(v(t)||v(e))Jn.warn("warning: invalid size for SetSize, id=".concat(this.GetID(),", type=").concat(this.GetNodeType(),", size=(").concat(t,", ").concat(e,")"));else if(this.IsCSSMode())Jn.warn("warning: call SetSize for a flexbox ui object, id=".concat(this.GetID(),", type=").concat(this.nodeType));else{var n=new Pt(t,e);if(this.size.IsNotEqual(n)){var r=this.GetSize();this.size=n,this.DoResize(r,this.size.Copy()),this.UpdateMargin(),this.UpdateRect()}}},e.prototype.SetMargin=function(t,e,n,r,o){if(void 0===o&&(o=!0),!this.IsCSSMode()){var i=new Kt(t,e,n,r);Kt.IsEqual(i,this.margin)||(this.margin=i,!1!==o&&this.UpdateRect())}},e.prototype.GetMargin=function(){return this.margin},e.prototype.GetRootRect=function(){var t=new Kt(0,0,this.size.GetWidth(),this.size.GetHeight()),e=this.GetParent();if(e)for(t.AddPoint(this.position),t.SubtractPoint(e.GetRelativePos());e.GetParent();){var n=e.GetPos();t.AddPoint(n),e=e.GetParent(),t.SubtractPoint(e.GetRelativePos())}return t},e.prototype.GetAlpha=function(){return this.alpha},e.prototype.SetAlpha=function(t){this.alpha!==t&&(this.alpha=t,this.Update())},e.prototype.GetVisible=function(){return this.isVisible},e.prototype.SetVisible=function(t){Jn.debug("SetVisible",t),t!==this.isVisible&&(this.isVisible=t,this.Update(),this.DoVisibleChanged())},e.prototype.CheckVisible=function(){for(var t=this;t;){if(!t.GetVisible())return!1;t=t.GetParent()}return!0},e.prototype.GetEnable=function(){return this.enable},e.prototype.SetEnable=function(t){this.enable!==t&&(this.enable=t,this.Update(),this.DoEnabledChanged())},e.prototype.SetAnchors=function(t,e){this.IsCSSMode()||this.anchors!==t&&(this.anchors=t,e&&this.UpdateMargin())},e.prototype.GetAnchors=function(){return this.anchors},e.prototype.GetMetadata=function(){throw new Error("Method not implemented.")},e.prototype.SetMetadata=function(t){throw Jn.debug("SetMetadata:",t),new Error("Method not implemented.")},e.prototype.GetMetadataType=function(){throw new Error("Method not implemented.")},e.prototype.SetMetadataType=function(t){throw Jn.debug("SetMetadataType:",t),new Error("Method not implemented.")},e.prototype.IsFocused=function(){throw new Error("Method not implemented.")},e.prototype.SetFocus=function(t){throw Jn.debug("SetFocus:",t),new Error("Method not implemented.")},e.prototype.GetNextObject=function(){throw new Error("Method not implemented.")},e.prototype.GetPrevObject=function(){throw new Error("Method not implemented.")},e.prototype.GetRoot=function(){var t=this.GetParent();return t?t.GetRoot():this.IsType(_t.VIEW)?this:null},e.prototype.Update=function(){var t=new Kt(0,0,this.size.GetWidth(),this.size.GetHeight());this.DoChange(t)},e.prototype.SetRadius=function(t,e,n,r,o){void 0===o&&(o=!0);var i=new Kt;if("string"==typeof t){var a=jn(t);if(null===a)return;i.SetRect(a.left,a.top,a.right,a.bottom)}else{if(!(T(t)&&T(e)&&T(r)&&T(r)))return void Jn.error("SetRadius() param error. left:".concat(t,", top:").concat(e,", right:").concat(n,", bottom:").concat(r));i.SetRect(t,e,n,r)}if(Kt.IsNotEqual(this.radius,i)){if(this.radius=i,!1===o)return;this.Update()}},e.prototype.GetRadius=function(){return this.radius},e.prototype.SetStyle=function(t){if(t){this.DoCreateLayoutNode();var e=this.GetCSSLayoutNode();if(e.SetStyle(t),e.IsBox()&&this.IsType(_t.VIEW)){var n=new Kn;this.SetLayout(n),this.IsLockLayout()||this.DoCSSLayout()}else this.DoCSSLayout()}},e.prototype.GetStyle=function(t){var e=this.GetCSSLayoutNode();return e?e.GetStyle(t):""},e.prototype.GetValue=function(){throw new Error("Method not implemented.")},e.prototype.SetValue=function(t){Jn.debug("SetValue:",t),this.DoSetValue(t)},e.prototype.GetSelected=function(){throw new Error("Method not implemented.")},e.prototype.SetSelected=function(t){throw Jn.debug("SetSelected:",t),new Error("Method not implemented.")},e.prototype.SetAutoSize=function(t){if(this.autoSize!==t){if(this.autoSize=t,this.IsCSSMode())return;this.autoSize&&this.AutoSize()}},e.prototype.GetAutoSize=function(){return this.autoSize},e.prototype.HitTest=function(t,e){return!(!this.isVisible||0===this.alpha)&&this.GetRect().PtInRect(new Xt(t,e))},e.prototype.GetRect=function(){var t=this.position,e=this.size;return new Kt(t,Xt.AddSize(t,e))},e.prototype.SetRect=function(t,e,n,r,o){if(void 0===o&&(o=!0),!this.IsCSSMode()){var i=!1,a=new Kt(t,e,n,r);if(Xt.isNotEqual(a.TopLeft(),this.position)){var s=this.position.Copy();this.position=a.TopLeft(),this.DoMove(s,this.position.Copy()),i=!0}if(Pt.IsNotEqual(a.GetSize(),this.size)){var u=this.size;this.size=a.GetSize(),this.DoResize(u,this.size.Copy()),i=!0}!1!==o&&i&&this.UpdateMargin()}},e.prototype.AsWebView=function(){return this},e.prototype.LockUpdate=function(){return this.lockUpdate||this.renderRect.SetRectEmpty(),!(this.lockUpdate>0)&&(this.lockUpdate++,!0)},e.prototype.UnlockUpdate=function(t){return this.DoChange(this.renderRect),!!this.lockUpdate&&(this.lockUpdate--,this.lockUpdate||t&&!this.renderRect.IsNotEmpty()&&(this.DoChange(this.renderRect),this.renderRect.SetRectEmpty()),!0)},e.prototype.IsLockUpdate=function(){return!1},e.prototype.DoCSSLayout=function(){if(this.IsCSSMode()){if(null===this.GetParent()){var t=or.AsWebView(this);if(!(null==t?void 0:t.IsRoot()))return void Jn.debug("DoCSSLayout: not mounted. ignore layout. id:",this.GetID())}for(var e=this.GetCSSLayoutNode();e.GetParent();)e=e.GetParent();if(null==e?void 0:e.IsBox()){var n=e.GetUIObject();if(null==n?void 0:n.IsType(_t.VIEW)){if(n.IsLockLayout())return;e.CalculateLayout()}var r=this.GetCSSLayoutNode(),o=r.GetLayoutRect(),i=r.GetLayoutSize(),a=!1;if(this.position.isNotEqual(o.TopLeft())){var s=this.position;this.position=o.TopLeft(),this.DoMove(s.Copy(),this.position.Copy()),a=!0}if(Pt.IsNotEqual(i,this.size)){var u=this.size;this.size=i,this.DoResize(u.Copy(),i.Copy()),a=!0}a&&this.UpdateRect()}}else Jn.warn("DoCSSLayout: is not css mode")},e.prototype.RenderTo=function(t,e){t.save(),this.ClipRadius(t);var n=this.DoRenderTo(t,e);return t.restore(),n},e.prototype.MeasureSize=function(t){return Jn.debug("MeasureSize:",t),new Pt},e.prototype.RelativePosChange=function(){},e.prototype.Release=function(){t.prototype.Release.call(this),Jn.info("Release WebUIObject"),Array.isArray(this.children)&&this.children.forEach((function(t){t.Release()}));var e=this.GetCSSLayoutNode();e&&e.Release(),this.SetParent(null),this.children=[]},e.prototype.DoClick=function(t,e,n,r){this.Click(t,e,n,r),this.CheckEnable()&&this.FireEvent(Gt.ON_CLICK,this,t,e,n,r)},e.prototype.DoMouseDown=function(t,e,n,r){this.CheckEnable()&&this.FireEvent(Gt.ON_MOUSE_DOWN,this,t,e,n,r)},e.prototype.DoMouseUp=function(t,e,n,r){this.CheckEnable()&&this.FireEvent(Gt.ON_MOUSE_UP,this,t,e,n,r)},e.prototype.DoParentChanged=function(t,e){this.DoCSSLayoutNodeChanged(t,e),this.UpdateRect(),this.RenderTreeChange(Boolean(t)),this.FireEvent(Gt.ON_PARENT_CHANGED,this,t)},e.prototype.EventCatchErrorHandle=function(t,e,n){var r=this.GetApp();Qa.error(r,Ba.ARK_EVENT_EXCEPTION,n,{eventName:t,eventScript:e})},e.prototype.DoChildChange=function(t){this.FireEvent(Gt.ON_CHILD_CHANGE,this,t)},e.prototype.DoResize=function(t,e){this.Resize(t,e),this.FireEvent(Gt.ON_RESIZE,this,t.GetWidth(),t.GetHeight(),e.GetWidth(),e.GetHeight())},e.prototype.DoChange=function(t){this.lockUpdate?(Jn.debug("[DoChange]",t),this.renderRect.UnionRect(t)):(this.Change(t),this.FireEvent(Gt.ON_CHANGE,this,t.getLeft(),t.getTop(),t.getRight(),t.getBottom()))},e.prototype.DoMove=function(t,e){this.Move(t,e),this.FireEvent(Gt.ON_MOVE,this,t.getX(),t.getY(),e.getX(),e.getY())},e.prototype.Change=function(t){this.NotifyParentChanged(t)},e.prototype.Resize=function(t,e){this.NotifyParentResize(t,e)},e.prototype.UpdateRect=function(){var t=this.GetParent();if(t){var e=t,n=e.GetLayout();if(!e.IsLockLayout()&&n){var r=t.GetRect();null==r||r.MoveToXY(0,0),n.UpdateRect(this,r)}}},e.prototype.UpdateMargin=function(){var t=this.GetParent();if(t){var e=t,n=e.GetLayout(),r=e.IsLockLayout();if(n&&!r){var o=e.GetRect();o.MoveToXY(0,0),n.UpdateMargin(this,o)}}},e.prototype.DoCSSCustomUpdate=function(){var t=this.GetCSSLayoutNode();this.IsCSSMode()&&(t.MarkDirty(),this.UpdateRect())},e.prototype.DoCSSLayoutNodeChanged=function(t,e){var n,r;if(t&&t.IsType(_t.VIEW)){var o=t.GetCSSLayoutNode();if(null==o?void 0:o.IsBox())if(e){this.DoCreateLayoutNode();var i=this.GetCSSLayoutNode(),a=0;try{for(var s=Ae(t.children),u=s.next();!u.done;u=s.next()){var c=u.value;if(c===this)break;c.GetVisible()&&c!==this&&a++}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}(null==i?void 0:i.GetParent())!==o&&o.InsertChild(i,a)}else{var p=this.GetCSSLayoutNode();(null==p?void 0:p.GetParent())===o&&o.RemoveChild(p)}}},e.prototype.NotifyParentResize=function(t,e){var n=this.GetParent();if(n){var r=or.AsWebView(n);r?r.ChildResize(this.AsWebView(),t,e):Jn.warn("parent is not WebView")}},e.prototype.NotifyParentChanged=function(t){var e=this.GetParent();if(e){e?e.ChildChange(this.AsWebView(),t):Jn.warn("parent is not WebView")}},e.prototype.NotifyParentMove=function(t,e){var n=this.GetParent();if(n){n?n.ChildMove(this.AsWebView(),t,e):Jn.warn("parent is not WebView")}},e.prototype.AutoSize=function(){},e.prototype.ClipRadius=function(t){if(this.radius&&!this.radius.IsEmpty()){var e=this.size,n=this.radius,r=new Kt(0,0,e.GetWidth(),e.GetHeight()),o=r.getLeft(),i=r.getTop(),a=r.getRight(),s=r.getBottom();t.beginPath(),t.moveTo(o,i+n.getLeft()),t.arcTo(o,i,o+n.getLeft(),i,n.getLeft()),t.arcTo(a,i,a,i+n.getTop(),n.getTop()),t.arcTo(a,s,a-n.getRight(),s,n.getRight()),t.arcTo(o,s,o,s-n.getBottom(),n.getBottom()),t.closePath(),t.clip()}},e.prototype.CheckEnable=function(){return!0},e.prototype.Click=function(t,e,n,r){Jn.debug("Click",t,e,n,r)},e.prototype.MouseDown=function(t,e,n,r){Jn.debug("MouseDown",t,e,n,r)},e.prototype.DoTouchStart=function(){throw new Error("Method not implemented.")},e.prototype.DoTouchEnd=function(){throw new Error("Method not implemented.")},e.prototype.DoTouchMove=function(){throw new Error("Method not implemented.")},e.prototype.DoTouchCancel=function(){throw new Error("Method not implemented.")},e.prototype.DoMouseMove=function(){throw new Error("Method not implemented.")},e.prototype.DoDblClick=function(){throw new Error("Method not implemented.")},e.prototype.DoMouseHover=function(){throw new Error("Method not implemented.")},e.prototype.DoMouseEnter=function(){throw new Error("Method not implemented.")},e.prototype.DoMouseLeave=function(){throw new Error("Method not implemented.")},e.prototype.DoMouseWheel=function(){throw new Error("Method not implemented.")},e.prototype.DoKeyDown=function(){throw new Error("Method not implemented.")},e.prototype.DoKeyUp=function(){throw new Error("Method not implemented.")},e.prototype.Move=function(t,e){this.NotifyParentMove(t,e)},e.prototype.DoVisibleChanged=function(){var t=this.isVisible,e=this.GetParent();this.DoCSSLayoutNodeChanged(e,t),this.UpdateRect(),this.FireEvent(Gt.ON_VISIBLE_CHANGED,this)},e.prototype.DoEnabledChanged=function(){},e.prototype.RenderTreeChange=function(t){Jn.debug("RenderTreeChange:",t)},e.prototype.DoCreateLayoutNode=function(){this.GetCSSLayoutNode()||Object.defineProperty(this,$n,{value:new zn(this),enumerable:!1,writable:!0,configurable:!1})},e}(Wt),er=k.getLogger("NormalLayout"),nr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ie(e,t),e.prototype.GetName=function(){return Mn.NORMAL_LAYOUT},e.prototype.InitParameters=function(t){er.debug("InitParameters:",t)},e.prototype.DoLayout=function(t){var e,n;if(t){var r=t.GetRect();r.MoveToXY(0,0);try{for(var o=Ae(t.children),i=o.next();!i.done;i=o.next()){var a=i.value;this.UpdateRect(a,r)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}}},e.prototype.UpdateRect=function(t,e){if(t){var n=t.GetSize(),r=t.GetPos(),o=t.GetMargin(),i=t.GetAnchors();if(i&kt.ANCHOR_RIGHT)i&kt.ANCHOR_LEFT?(n.SetWidth(Math.max(0,e.Width()-o.getLeft()-o.getRight())),r.setX(o.getLeft()+e.getLeft())):r.setX(e.getRight()-n.GetWidth()-o.getRight());else if(i&kt.ANCHOR_LEFT)r.setX(o.getLeft()+e.getLeft());else{var a=Math.abs(o.getLeft())+Math.abs(o.getRight());a?r.setX(o.getLeft()*(e.Width()-n.GetWidth())/a+e.getLeft()):r.setX((e.Width()-n.GetWidth())/2+e.getLeft())}if(i&kt.ANCHOR_BOTTOM)i&kt.ANCHOR_TOP?(n.SetHeight(Math.max(0,e.Height()-o.getTop()-o.getBottom())),r.setY(o.getTop()+e.getTop())):r.setY(e.getBottom()-n.GetHeight()-o.getBottom());else if(i&kt.ANCHOR_TOP)r.setY(o.getTop()+e.getTop());else{var s=Math.abs(o.getTop())+Math.abs(o.getBottom());s?r.setY(o.getTop()*(e.Height()-n.GetHeight())/s+e.getTop()):r.setY((e.Height()-n.GetHeight())/2+e.getTop())}this.SetObjectRect(t,new Kt(r,Xt.AddSize(r,n)))}},e.prototype.UpdateMargin=function(t,e){if(t){var n=e.GetSize(),r=t.GetPos(),o=t.GetSize(),i=n.GetWidth()-o.GetWidth()-r.getX(),a=n.GetHeight()-o.GetHeight()-r.getY(),s=new Kt(r.getX(),r.getY(),i,a);this.SetObjectMargin(t,s)}},e}(Yn),rr=k.getLogger("WebView"),or=function(t){function e(e){var n=t.call(this,e)||this;return n.isFloating=!1,n.lockLayout=0,n.opaque=!1,n.layout=new nr,n.lockLayout=0,n.opaque=!1,n.textureList=[],n.floatingViewList=[],n.relativePos=Xt.EmptyPoint,n}return Ie(e,t),e.isView=function(t){return t.tagName===e.tagName},e.AsWebView=function(t){return t.IsType(_t.VIEW)?t:null},e.prototype.GetNodeType=function(){return _t.VIEW},e.prototype.GetValue=function(){throw new Error("Method not implemented.")},e.prototype.SetValue=function(e){var n=this;rr.info("SetValue:",e),t.prototype.SetValue.call(this,e),y(e)&&Object.keys(e).forEach((function(t){var r=n.GetChild(t);r&&r.SetValue(e[t])}))},e.prototype.GetFloating=function(){return this.isFloating},e.prototype.SetFloating=function(t){t!==this.isFloating&&(this.isFloating=t,this.Update())},e.prototype.GetRelativePos=function(){return this.relativePos.Copy()},e.prototype.SetRelativePos=function(t,e){this.relativePos=new Xt(t,e)},e.prototype.AddChild=function(t){if(rr.debug("AddChild",t),!t)return!1;if(t.GetParent()===this)return!1;for(var n=this;n;){if(n===t)return!1;n=n.GetParent()}if(t.IsType(_t.VIEW)&&e.AsWebView(t).IsRoot())return!1;this.AddObject(t);var r=!1,o=new Kt;if(t.IsType(_t.VIEW)){var i=e.AsWebView(t);if(i.GetFloating()||i.GetFloatingRect(o)){var a=i.GetRootRect();o.UnionRect(a,o),r=!0}}if(r){var s=this.GetRoot();s&&(s.RebuildFloating(),s.DoChange(o))}else{var u=t.GetRect();this.DoChange(u)}return!0},e.prototype.InsertChild=function(t,n){if(!n||t<0)return-1;if(n.GetParent()===this)return-1;for(var r=this;r;){if(r===n)return-1;r=r.GetParent()}if(n.IsType(_t.VIEW)&&e.AsWebView(n).IsRoot())return-1;var o=this.InsertObject(t,n),i=!1,a=new Kt;if(n.IsType(_t.VIEW)){var s=e.AsWebView(n);if(s.GetFloating()||s.GetFloatingRect(a)){var u=s.GetRootRect();a.UnionRect(u,a),i=!0}}if(i){var c=this.GetRoot();c&&(c.RebuildFloating(),c.DoChange(a))}else{var p=n.GetRect();this.DoChange(p)}return o},e.prototype.AddObject=function(t){var n=t.GetParent();n&&n.DeleteChild(t),this.children.push(t),t.SetParent(this),t.DoParentChanged(this,!0);var r=e.AsWebView(t);r&&r.DoLayout(),this.DoChildChange(t)},e.prototype.DeleteChild=function(t){if(rr.debug("DeleteChild:",t),!t)return!1;if(t.GetParent()!==this)return!1;var n=!1,r=new Kt;if(t.IsType(_t.VIEW)){var o=e.AsWebView(t);if(o.GetFloating()||o.GetFloatingRect(r)){var i=o.GetRootRect();r.UnionRect(i,r),n=!0}}if(this.DeleteObject(t),n){var a=this.GetRoot();a&&(a.RebuildFloating(),a.DoChange(r))}else{var s=t.GetRect();this.DoChange(s)}return!0},e.prototype.DeleteObject=function(t){var e=this.children.findIndex((function(e){return e===t}));-1!==e&&this.children.splice(e,1),t.DoParentChanged(this,!1),t.SetParent(null),this.DoChildChange(t)},e.prototype.InsertObject=function(t,n){if(t<0)return-1;var r=n.GetParent();r&&r.DeleteChild(n);var o=t;t>=this.children.length-1?(o=this.children.length,this.children.push(n)):this.children.splice(t,0,n),n.SetParent(this),n.DoParentChanged(this,!0);var i=e.AsWebView(n);return i&&i.DoLayout(),this.DoChildChange(n),o},e.prototype.ClearChildren=function(){if(rr.debug("ClearChildren:",this),this.children.length){var t=!1,e=new Kt;if(this.GetFloatingRect(e)){var n=this.GetRootRect();e.UnionRect(n,e),t=!0}this.LockLayout();for(var r=this.children.length-1;r>=0;r--){var o=this.children[r];this.children.splice(r,1),o.DoParentChanged(this,!1),o.SetParent(null),o.Release()}if(this.children=[],this.UnlockLayout(),this.DoChildChange(null),t){var i=this.GetRoot();i&&(i.RebuildFloating(),i.DoChange(e))}else this.Update();return!0}},e.prototype.GetChild=function(t){var e,n;if(t){try{for(var r=Ae(this.children),o=r.next();!o.done;o=r.next()){var i=o.value;if(i.GetID()===t)return i}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}},e.prototype.GetFirstChild=function(){return this.children[0]},e.prototype.GetLastChild=function(){return this.children[this.children.length-1]},e.prototype.GetNextChild=function(t){var e=this;if(t&&t.GetParent()===this){var n=t.GetParent(),r=n.children.findIndex((function(t){return t===e}));return r+1>=n.children.length?null:n.children[r+1]}return null},e.prototype.GetPrevChild=function(t){var e=this;if(t&&t.GetParent()===this){var n=t.GetParent(),r=n.children.findIndex((function(t){return t===e}));return r-1<0?null:n.children[r-1]}return null},e.prototype.GetUIObject=function(t){var n,r;if(!t)return null;try{for(var o=Ae(this.children),i=o.next();!i.done;i=o.next()){var a=i.value;if(a.GetID()===t)return a;if(a.IsType(_t.VIEW)){var s=e.AsWebView(a).GetUIObject(t);if(s)return s}}}catch(t){n={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return null},e.prototype.GetController=function(){throw new Error("Method not implemented.")},e.prototype.GetTemplate=function(t){throw rr.debug(t),new Error("Method not implemented.")},e.prototype.AddTexture=function(t){return this.textureList=Array.isArray(this.textureList)?this.textureList:[],!!t&&(t.SetOwner(this),this.textureList.push(t),t.IsOpaque()&&(this.opaque=!0),this.Update(),!0)},e.prototype.UpdateTexture=function(t){rr.debug("UpdateTexture:",t),this.Update()},e.prototype.GetTexture=function(t){var e,n,r=this.textureList;if(!r||0===r.length)return null;if(!t)return null;try{for(var o=Ae(r),i=o.next();!i.done;i=o.next()){var a=i.value;if(t===a.GetID())return a}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return null},e.prototype.DeleteTexture=function(t){var e=this.textureList;if(!e||0===e.length)return!1;if(!t)return!1;for(var n=0;n<e.length;n++){var r=e[n];if(t===r.GetID())return r.SetOwner(null),e.splice(n,1),this.Update(),!0}return!1},e.prototype.HitTest=function(e,n){return!this.isFloating&&t.prototype.HitTest.call(this,e,n)},e.prototype.LockLayout=function(){return rr.debug("lockLayout:",this),!(this.lockLayout>=1)&&(this.lockLayout++,!0)},e.prototype.UnlockLayout=function(t){if(rr.debug("UnlockLayout:",this),this.lockLayout){if(this.lockLayout--,!this.lockLayout)(!!E(t)||t)&&this.DoLayout();return!0}return!1},e.prototype.IsLockLayout=function(){return Boolean(this.lockLayout)},e.prototype.GetLayered=function(){throw new Error("Method not implemented.")},e.prototype.SetLayered=function(t){throw rr.debug(t),new Error("Method not implemented.")},e.prototype.Update=function(){t.prototype.Update.call(this),this.UpdateFloating()},e.prototype.CreateFloating=function(){var t,e;try{for(var n=Ae(this.children),r=n.next();!r.done;r=n.next()){var o=r.value;if(o.IsType(_t.VIEW)){var i=o.AsWebView();i.GetFloating()&&this.floatingViewList.push(i),Array.isArray(i.floatingViewList)&&i.floatingViewList&&(this.floatingViewList=this.floatingViewList.concat(i.floatingViewList),i.floatingViewList=[])}}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},e.prototype.ClearFloating=function(){this.floatingViewList=[]},e.prototype.SetRoot=function(t){this.isRoot=t},e.prototype.IsRoot=function(){return this.isRoot},e.prototype.SetLayout=function(t){this.layout=t},e.prototype.GetLayout=function(){return this.layout},e.prototype.DoLayout=function(){!this.lockLayout&&this.layout&&(this.LockUpdate(),this.layout.DoLayout(this),this.UnlockUpdate())},e.prototype.ChildResize=function(t,e,n){if(this.IsType(_t.VIEW)){var r=t.GetPos(),o=new Kt(r,Xt.AddSize(r,e)),i=new Kt(r,Xt.AddSize(r,n)),a=Kt.UnionRect(o,i);a.SubtractPoint(this.GetRelativePos());var s=this.GetSize(),u=new Kt(0,0,s.GetWidth(),s.GetHeight());a.IntersectRect(a,u),this.DoChange(a)}},e.prototype.ChildChange=function(t,e){if(this.IsType(_t.VIEW)){var n=t.GetPos();e.AddPoint(n),e.SubtractPoint(this.relativePos);var r=new Kt(0,0,this.size.GetWidth(),this.size.GetHeight());e.IntersectRect(e,r),this.DoChange(e)}},e.prototype.ChildMove=function(t,e,n){if(this.IsType(_t.VIEW)){rr.debug("ChildMove:",t,e,n);var r=t.GetSize(),o=new Kt(e,Xt.AddSize(e,r)),i=new Kt(n,Xt.AddSize(n,r)),a=Kt.UnionRect(o,i);a.SubtractPoint(this.relativePos);var s=new Kt(0,0,this.size.GetWidth(),this.size.GetHeight());a.IntersectRect(a,s),this.DoChange(a)}},e.prototype.RelativePosChange=function(){var t,e;try{for(var n=Ae(this.children),r=n.next();!r.done;r=n.next()){r.value.RelativePosChange()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},e.prototype.IsOpaque=function(){return this.opaque},e.prototype.SetMetadata=function(e){var n=this;if(e&&y(e)){rr.debug("SetMetadata:",e,this.GetApp());var r=Object.keys(e);if(1===r.length&&this.metadataType===r[0]){t.prototype.SetValue.call(this,e);var o=e[r[0]];y(o)&&Object.keys(o).forEach((function(t){var e=o[t],r=n.GetUIObjectByMetadataType(t);r&&r.SetValue(e)}))}}},e.prototype.GetMetadata=function(){throw new Error("Method not implemented.")},e.prototype.SetCSSNodeSize=function(t,e){if(this.IsRoot()&&this.IsCSSMode()){var n=[],r=this.size;T(t)&&!v(t)&&r.GetWidth()!==t&&n.push("width: ".concat(t,"px")),T(e)&&!v(e)&&r.GetHeight()!==e&&n.push("height: ".concat(e,"px"));var o=this.GetCSSLayoutNode();n.length&&(o.SetStyle(n.join(";")),this.DoCSSLayout())}},e.prototype.DoHitTest=function(t,e){var n=this.ChildHitTest(t,e);if(null==n?void 0:n.IsType(_t.VIEW)){var r=n,o=this.GetChildPos(new Xt(t,e),r);n=r.DoHitTest(o.getX(),o.getY())}else n=this;return n},e.prototype.ChildHitTest=function(t,e){var n,r,o,i=new Xt(t,e);if((null===(o=this.floatingViewList)||void 0===o?void 0:o.length)&&this.IsRoot())try{for(var a=Ae(this.floatingViewList),s=a.next();!s.done;s=a.next()){if((p=s.value).CheckVisible())if(p.GetRootRect().PtInRect(i))return p}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}for(var u=this.children,c=u.length-1;c>=0;c--){var p,l=u[c];if(l.IsType(_t.VIEW))if((p=l).GetFloating())continue;var h=Xt.Add(i,this.relativePos);if(l.HitTest(h.getX(),h.getY()))return l}return null},e.prototype.Release=function(){t.prototype.Release.call(this),Array.isArray(this.textureList)&&(this.textureList.forEach((function(t){t.Release()})),this.textureList=[],this.floatingViewList=[])},e.prototype.DoRenderTo=function(t,e){if(!this.isVisible)return!1;this.RenderBackground(t,e),this.RenderContent(t,e),this.RenderFloating(t,e)},e.prototype.Resize=function(t,e){this.LockUpdate(),this.DoLayout(),this.UnlockUpdate(),this.isFloating?this.NotifyRootResize(t,e):this.NotifyParentResize(t,e)},e.prototype.Move=function(t,e){var n,r;this.isFloating?this.NotifyRootMove(t,e):this.NotifyParentMove(t,e);var o=new Kt;if(this.GetFloatingRect(o)){var i=Kt.AddPoint(o,Xt.Subtract(t,e)),a=new Kt;a.UnionRect(i,o);var s=this.GetRoot();s&&s.DoChange(a)}try{for(var u=Ae(this.children),c=u.next();!c.done;c=u.next()){c.value.RelativePosChange()}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}},e.prototype.Change=function(t){this.isFloating?this.NotifyRootChange(t):this.NotifyParentChanged(t)},e.prototype.Click=function(t,e,n,r){var o=this.GetParent();o&&o.DoClick(t,e,n,r)},e.prototype.MouseDown=function(t,e,n,r){var o=this.GetParent();o&&o.DoMouseDown(t,e,n,r)},e.prototype.GetChildPos=function(t,e){var n=Xt.Add(t,this.relativePos);if(e.IsType(_t.VIEW)){var r=e;if(r.GetFloating()){var o=r.GetRootRect();return Xt.Subtract(n,o.TopLeft())}}var i=e.GetPos();return Xt.Subtract(n,i)},e.prototype.RenderBackground=function(t,e){var n=this;Array.isArray(this.textureList)&&0!==this.textureList.length&&this.textureList.forEach((function(r){if(r.GetVisible()){var o=new Kt(0,0,n.size.GetWidth(),n.size.GetHeight()),i=Kt.IntersectRect(o,e);i.IsNotEmpty()&&r.RenderTo(t,i,o)}}))},e.prototype.RenderContent=function(t,n){var r,o;this.drawCanvas(t,n);try{for(var i=Ae(this.children),a=i.next();!a.done;a=i.next()){var s=a.value,u=s.GetRect();u.SubtractPoint(this.relativePos);var c=Kt.IntersectRect(n,u);if(s.GetVisible()&&s.GetAlpha()&&c.IsNotEmpty()){var p=e.AsWebView(s);if(null==p?void 0:p.GetFloating())continue;var l=u.getLeft(),h=u.getTop();t.save(),t.translate(l,h),c.OffsetRect(-l,-h),s.RenderTo(t,c),t.restore()}else c.IsEmpty()}}catch(t){r={error:t}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}},e.prototype.drawCanvas=function(t,e){if(Ya.getContext().isDebug()){t.save(),t.beginPath(),t.rect(0,0,e.Width(),e.Height());var n="";n=this.GetCSSLayoutNode()?this.GetStyle(d.BACKGROUND_COLOR):this.textureList.length?c(this.textureList[0].GetColor()):"",t.fillStyle=n||"transparent",t.fill(),t.stroke(),t.restore()}},e.prototype.RenderFloating=function(t,e){Array.isArray(this.floatingViewList)&&this.floatingViewList.length&&this.floatingViewList.forEach((function(n){if(n.CheckVisible()){var r=n.GetRootRect(),o=Kt.IntersectRect(e,r);o.IsNotEmpty()&&(t.save(),t.translate(r.getLeft(),r.getTop()),o.OffsetRect(-r.getLeft(),-r.getTop()),n.RenderTo(t,o),t.restore())}}))},e.prototype.UpdateFloating=function(){var t,n,r=this.GetRoot();if(r)try{for(var o=Ae(this.children),i=o.next();!i.done;i=o.next()){var a=i.value,s=e.AsWebView(a);if(s){if(s.GetFloating()){var u=s.GetRootRect();r.DoChange(u)}s.UpdateFloating()}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}},e.prototype.NotifyRootChange=function(t){var e=this.GetRoot();e&&e!==this&&e.FloatingChildChange(this,t)},e.prototype.NotifyRootMove=function(t,e){var n=this.GetRoot();n&&n.FloatingChildMove(this,t,e)},e.prototype.NotifyRootResize=function(t,e){var n=this.GetRoot();n&&n.FloatingChildResize(this,t,e)},e.prototype.FloatingChildChange=function(t,e){var n=t.GetRootRect(),r=e.Copy();r.AddPoint(n.TopLeft());var o=new Kt(0,0,this.size.GetWidth(),this.size.GetHeight());r.IntersectRect(r,o),this.DoChange(r)},e.prototype.FloatingChildMove=function(t,e,n){rr.debug("FloatingChildMove",t,e,n)},e.prototype.FloatingChildResize=function(t,e,n){rr.debug("FloatingChildResize",t,e,n)},e.prototype.RebuildFloating=function(){rr.debug("RebuildFloating")},e.prototype.GetFloatingRect=function(t){var n,r,o=!1;try{for(var i=Ae(this.children),a=i.next();!a.done;a=i.next()){var s=a.value,u=e.AsWebView(s);if(null==u?void 0:u.GetFloating()){if(o=!0,u.GetVisible()){var c=u.GetRootRect();t.UnionRect(t,c)}var p=new Kt;u.GetFloatingRect(p)&&(o=!0,t.UnionRect(t,p))}}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return o},e.prototype.GetUIObjectByMetadataType=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{for(var r=Ae(this.children),o=r.next();!o.done;o=r.next()){var i=o.value;if(i.metadataType===t)return i;if(i.IsType(_t.VIEW)){var a=i.GetUIObjectByMetadataType(t);if(a)return a}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null},e.tagName="VIEW",e}(tr),ir=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ie(e,t),e.prototype.GetApplicationContext=function(){return Ya.getContext()},e}(nn),ar=k.getLogger("ImageLoader"),sr=function(){function t(t,e){this.url=t,this.loaded=!1,this.applicationId=e}return t.prototype.load=function(){return Oe(this,void 0,void 0,(function(){var t=this;return _e(this,(function(e){return[2,new Promise((function(e,n){var r=t,o=r.url,i=r.applicationId,a=function(r){return Oe(t,void 0,void 0,(function(){var t,o,i;return _e(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,Qe.objectUrlToBlob(r)];case 1:return t=a.sent(),[4,createImageBitmap(t)];case 2:return o=a.sent(),this.loaded=!0,this.bitmap=o,e(),[3,4];case 3:return i=a.sent(),ar.error(i),n(i),[3,4];case 4:return[2]}}))}))};if(o.startsWith("blob:"))return ar.debug("hit image cache. url:",o),void a(o);var s=nt.GetApplication(i).GetApp(),u=new ir(s);u.AttachEvent(Jt.ON_COMPLETE,(function(t){if(t.IsSuccess()){var e=t.GetCachePath();a(e)}else n(new Error("IMAGE_DOWNLOAD_ERROR"));u.DetachEvent(Jt.ON_COMPLETE)})),u.Get(o)}))]}))}))},t.prototype.IsLoaded=function(){return this.loaded},t.prototype.GetBitmap=function(){return this.bitmap},t.prototype.Release=function(){this.bitmap&&this.bitmap.close()},t}(),ur=k.getLogger("WebTexture"),cr=function(t){function e(e){var n=t.call(this)||this;return n.owner=null,n.applicationId=e,n.value="",n.color="",n.visible=!0,n.loader=null,n}return Ie(e,t),e.prototype.GetNodeType=function(){return _t.TEXTURE},e.prototype.InitValue=function(t){this.value=t},e.prototype.InitVisible=function(t){this.visible=t},e.prototype.InitColor=function(t){this.color=t},e.prototype.RenderTo=function(t,e,n){if(this.color)return t.save(),t.beginPath(),t.rect(e.getLeft(),e.getTop(),e.Width(),e.Height()),t.closePath(),t.clip(),t.fillStyle=c(this.color),t.strokeStyle="transparent",t.fill(),t.stroke(),void t.restore();this.bitmap&&(t.save(),t.beginPath(),t.rect(e.getLeft(),e.getTop(),e.Width(),e.Height()),t.closePath(),t.clip(),t.drawImage(this.bitmap,0,0,n.Width(),n.Height()),t.restore())},e.prototype.SetOwner=function(t){var e;this.owner=t,this.owner&&(null===(e=this.value)||void 0===e?void 0:e.trim())&&this.Load(!1)},e.prototype.GetApp=function(){return nt.GetApplication(this.applicationId).GetApp()},e.prototype.SetValue=function(t){var e,n;if("number"!=typeof t){var r=this.GetApp(),o=$.GetImages(r),i=t;try{for(var a=Ae(o),s=a.next();!s.done;s=a.next()){var u=s.value;if(u.name===t){i=u.url;break}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}i&&(i?this.value!==i&&(this.DestroyLoader(),this.value=i,this.Load(!1)):this.value!==i&&(this.Destroy(),this.value="",this.Update()))}else this.color=t},e.prototype.GetValue=function(){return this.value},e.prototype.SetColor=function(t){this.Destroy(),this.color=t,this.Update()},e.prototype.GetColor=function(){return this.color},e.prototype.Release=function(){t.prototype.Release.call(this),this.DestroyLoader()},e.prototype.SetVisible=function(t){this.visible!==t&&(this.visible=t,this.Update())},e.prototype.GetVisible=function(){return this.visible},e.prototype.IsOpaque=function(){return!1},e.prototype.Load=function(t){return Oe(this,void 0,void 0,(function(){var e;return _e(this,(function(n){switch(n.label){case 0:if(this.CheckLoader(),this.owner&&this.owner.LockUpdate(),!this.loader)return[3,4];if(!this.value)return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.loader.load()];case 2:return n.sent(),this.OnLoadEvent(),[3,4];case 3:return e=n.sent(),this.OnLoadEvent(),ur.error("load image fail.",e),[3,4];case 4:return this.owner&&this.owner.UnlockUpdate(t),[2]}}))}))},e.prototype.Destroy=function(){},e.prototype.DestroyLoader=function(){this.loader&&(this.loader.Release(),this.loader=null)},e.prototype.Update=function(){this.owner&&this.owner.UpdateTexture(this)},e.prototype.OnLoadEvent=function(){this.UpdateImageData()},e.prototype.UpdateImageData=function(){this.loader&&(this.bitmap=this.loader.GetBitmap()),ur.debug("loaded",this.bitmap),this.bitmap&&this.Update()},e.prototype.CheckLoader=function(){var t=this,e=t.applicationId,n=t.owner,r=t.value;!t.loader&&r&&n&&(this.loader=new sr(r,e))},e.tagName="TEXTURE",e}(Dt),pr=function(t,e){this.application=t,this.element=e};!function(t){t.ID="id"}(Qn||(Qn={}));var lr,hr=function(t){function e(e,n,r){var o=t.call(this,e,n)||this;return o.pObject=r,o}return Ie(e,t),e.prototype.read=function(){var t=this.pObject,e=this.element.getAttribute(Qn.ID);t.SetID(e)},e}(pr);!function(t){t.VALUE="value",t.NAME="name"}(lr||(lr={}));var fr,dr=function(t){function e(e,n,r){var o=t.call(this,e,n)||this;return o.element=n,o.pObject=r,o}return Ie(e,t),e.prototype.read=function(){var t=this,e=this.element;Array.from(e.childNodes).forEach((function(e){if(1===e.nodeType){var n=e.getAttribute(lr.NAME),r=e.getAttribute(lr.VALUE);"string"==typeof r&&(null==r?void 0:r.trim())&&t.pObject.AddEventListener(n,r)}}))},e.tagName="EVENT",e}(pr);!function(t){t.SIZE="size",t.MARGIN="margin",t.RADIUS="radius",t.ANCHORS="anchors",t.ALPHA="alpha",t.VISIBLE="visible",t.ENABLE="enable",t.METADATATYPE="metadatatype",t.CLASS_NAME="style"}(fr||(fr={}));var gr,Er=function(t){function e(e,n,r){var o=t.call(this,e,n)||this;return o.pObject=r,o}return Ie(e,t),e.prototype.read=function(){var t=this,e=t.pObject,n=t.element,r=t.application;new hr(r,n,e).read();var o=qn(n.getAttribute(fr.SIZE));2===o.length&&(e.size=new Pt(parseInt(o[0],10)||0,parseInt(o[1],10)||0));var i=jn(n.getAttribute(fr.MARGIN));i&&(e.margin=new Kt(i.left,i.top,i.right,i.bottom));var a=jn(n.getAttribute(fr.RADIUS));a&&e.SetRadius(a.left,a.top,a.right,a.bottom);var s=n.getAttribute(fr.ALPHA);if(s){var u=parseInt(s,10);e.alpha=v(u)?Ft:u}var c=n.getAttribute(fr.VISIBLE);c&&(e.isVisible=!m(c));var p=n.getAttribute(fr.ENABLE);p&&(e.enable=!m(p));var l=n.getAttribute(fr.ANCHORS);if(l){var h=parseInt(l,10);e.anchors=v(h)?Vt:h}var f=n.getAttribute(fr.METADATATYPE);f&&(e.metadataType=f);var d=n.getAttribute(fr.CLASS_NAME);d&&e.SetStyle(d),Array.from(n.childNodes).forEach((function(t){1===t.nodeType&&(t.tagName.toUpperCase()===dr.tagName&&new dr(r,t,e).read())}))},e}(pr),yr=function(){function t(){}return t.readBooleanValue=function(t){if("string"==typeof t&&t){if("true"===t)return!0;if("false"===t)return!1}return null},t.readNumberValue=function(t){if("string"==typeof t&&t){var e=Number(t);return v(e)?null:e}return null},t}();!function(t){t.VALUE="value",t.STRETCH="stretch",t.MODE="mode",t.AUTOSIZE="autosize"}(gr||(gr={}));var Tr,vr,Rr=function(t){function e(e,n,r){var o=t.call(this,e,n)||this;return o.pObject=r,o}return Ie(e,t),e.prototype.read=function(){var t=this,e=t.pObject,n=t.element,r=t.application;new Er(r,n,e).read();var o=n.getAttribute("value");o&&e.SetValue(o);var i=yr.readNumberValue(n.getAttribute(gr.STRETCH));null!==i&&(e.stretch=i);var a=n.getAttribute(gr.MODE);a&&e.SetMode(a);var s=yr.readBooleanValue(n.getAttribute(gr.AUTOSIZE));"boolean"==typeof s&&(e.autoSize=s),e.LockUpdate(),e.Init(),e.UnlockUpdate()},e}(pr),mr=k.getLogger("WebImage"),Ir=function(t){function e(e){var n=t.call(this,e)||this;return n.jsUIObject=null,n.autoSize=!1,n.stretch=It.FILL,n.mode=Ot.NULL,n.bitmap=null,n}return Ie(e,t),e.isImage=function(t){return t.tagName===e.tagName},e.prototype.GetNodeType=function(){return _t.IMAGE},e.prototype.Init=function(){this.url&&this.Load()},e.prototype.Load=function(){return Oe(this,void 0,void 0,(function(){var t;return _e(this,(function(e){switch(e.label){case 0:if(this.CheckLoader(),this.LockUpdate(),!this.loader)return[3,4];if(!this.url)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.loader.load()];case 2:return e.sent(),this.UnlockUpdate(),this.OnLoadEvent(),[3,4];case 3:return t=e.sent(),this.UnlockUpdate(),this.OnLoadEvent(),mr.error("load image fail.",t),[3,4];case 4:return[2]}}))}))},e.prototype.MeasureSize=function(){var t=mn.Yoga;return this.size.GetWidth()&&this.size.GetHeight()&&this.size.GetWidth()!==t.Constants.undefinedValue&&this.size.GetHeight()!==t.Constants.undefinedValue?this.size:this.bitmap?new Pt(this.bitmap.width,this.bitmap.height):Pt.EmptySize},e.prototype.AutoSize=function(){var t=this.MeasureSize();if(t.IsNotEmpty()){var e=this.size;this.size=t,this.DoResize(e,this.size),this.UpdateRect()}},e.prototype.SetStretch=function(t){this.stretch!==t&&(this.stretch=t,this.Update())},e.prototype.GetStretch=function(){return this.stretch},e.prototype.SetMode=function(t){if("string"==typeof t){var e=t.split(" "),n=null;if(1===e.length){var r=Ce(e,1)[0];r===Nt.FILL?n=Ot.FILL:r===Nt.ASPECTFIT?n=Ot.ASPECTFIT:r===Nt.ASPECTFILL?n=Ot.ASPECTFILL:r===Nt.WIDTHFIX?n=Ot.WIDTHFIX:r===Nt.TOP?n=Ot.TOP:r===Nt.BOTTOM?n=Ot.BOTTOM:r===Nt.CENTER?n=Ot.CENTER:r===Nt.LEFT?n=Ot.LEFT:r===Nt.RIGHT&&(n=Ot.RIGHT)}else if(2===e.length){var o=Ce(e,2),i=o[0],a=o[1];i===Nt.TOP&&a===Nt.LEFT||i===Nt.LEFT&&a===Nt.TOP?n=Ot.TOP_LEFT:i===Nt.TOP&&a===Nt.RIGHT||i===Nt.RIGHT&&a===Nt.TOP?n=Ot.TOP_RIGHT:i===Nt.BOTTOM&&a===Nt.LEFT||i===Nt.LEFT&&a===Nt.BOTTOM?n=Ot.BOTTOM_LEFT:(i===Nt.BOTTOM&&a===Nt.RIGHT||i===Nt.RIGHT&&a===Nt.BOTTOM)&&(n=Ot.BOTTOM_RIGHT)}n&&this.mode!==n&&(this.mode=n,this.Update())}},e.prototype.GetMode=function(){return this.mode},e.prototype.SetValue=function(t){var e,n,r=$.GetImages(this.GetApp()),o=t;try{for(var i=Ae(r),a=i.next();!a.done;a=i.next()){var s=a.value;if(s.name===t){o=s.url;break}}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}o&&this.url!==o&&(this.DestroyLoader(),this.url=o,this.Load())},e.prototype.GetValue=function(){return this.url},e.prototype.Release=function(){t.prototype.Release.call(this),this.DetachEvent(Gt.ON_ERROR),this.DetachEvent(Gt.ON_LOAD),this.DestroyLoader()},e.prototype.DoRenderTo=function(t,e){if(this.bitmap){var n=new Pt(this.bitmap.width,this.bitmap.height);if(!n.IsEmpty()){var r=new Kt(0,0,this.size.GetWidth(),this.size.GetHeight());this.mode===Ot.NULL?this.ApplyStretchMode(r,n):this.ApplyMode(r,n),t.save(),t.beginPath(),t.rect(e.getLeft(),e.getTop(),e.Width(),e.Height()),t.clip(),t.drawImage(this.bitmap,r.getLeft(),r.getTop(),r.Width(),r.Height()),t.closePath(),t.restore()}}else{Ya.getContext().isDebug()&&(this.bitmap||(t.save(),t.beginPath(),t.rect(0,0,this.size.GetWidth(),this.size.GetHeight()),t.fillStyle="#000",t.fill(),t.stroke(),t.closePath(),t.restore()))}},e.prototype.ApplyStretchMode=function(t,e){if(this.stretch!==It.FILL){var n=this.size,r=new Pt;switch(this.stretch){case It.FULL_IMAGE:n.IsNotEmpty()&&(r=e.Copy(),e.GetWidth()/n.GetWidth()>e.GetHeight()/n.GetHeight()?e.GetWidth()>n.GetWidth()&&(r.SetWidth(n.GetWidth()),r.SetHeight(e.GetHeight()*(n.GetWidth()/e.GetWidth()))):e.GetHeight()>n.GetHeight()&&(r.SetHeight(n.GetHeight()),r.SetWidth(e.GetWidth()*(n.GetHeight()/e.GetHeight()))));break;case It.ACTUAL_SIZE:r=e.Copy()}r.GetWidth()<=n.GetWidth()&&t.setLeft((n.GetWidth()-r.GetWidth())/2),t.setRight(t.getLeft()+r.GetWidth()),r.GetHeight()<=n.GetHeight()&&t.setTop((n.GetHeight()-r.GetHeight())/2),t.setBottom(t.getTop()+r.GetHeight())}},e.prototype.ApplyMode=function(t,e){if(e.GetWidth()&&e.GetHeight()){var n=this.size;if(this.mode!==Ot.FILL){var r=e.GetWidth()/e.GetHeight(),o=n.GetWidth()/n.GetHeight(),i=e.Copy();switch(this.mode){case Ot.ASPECTFIT:r>o?(i.SetWidth(n.GetWidth()),i.SetHeight(i.GetWidth()/r)):(i.SetHeight(n.GetHeight()),i.SetWidth(i.GetHeight()*r));break;case Ot.ASPECTFILL:r>o?(i.SetHeight(n.GetHeight()),i.SetWidth(i.GetHeight()*r)):(i.SetWidth(n.GetWidth()),i.SetHeight(i.GetWidth()/r));break;case Ot.WIDTHFIX:i.SetWidth(n.GetWidth()),i.SetHeight(e.GetHeight()*(i.GetWidth()/e.GetWidth()));case Ot.TOP:case Ot.BOTTOM:case Ot.CENTER:case Ot.LEFT:case Ot.RIGHT:case Ot.TOP_LEFT:case Ot.TOP_RIGHT:case Ot.BOTTOM_LEFT:case Ot.BOTTOM_RIGHT:}this.mode<Ot.TOP||this.mode===Ot.CENTER?(t.setLeft((n.GetWidth()-i.GetWidth())/2),t.setRight(t.getLeft()+i.GetWidth()),t.setTop((n.GetHeight()-i.GetHeight())/2),t.setBottom(t.getTop()+i.GetHeight())):this.mode===Ot.TOP?(t.setLeft((n.GetWidth()-i.GetWidth())/2),t.setRight(t.getLeft()+i.GetWidth()),t.setTop(0),t.setBottom(i.GetHeight())):this.mode===Ot.BOTTOM?(t.setLeft((n.GetWidth()-i.GetWidth())/2),t.setRight(t.getLeft()+i.GetWidth()),t.setBottom(n.GetHeight()),t.setTop(t.getBottom()-i.GetHeight())):this.mode===Ot.LEFT?(t.setTop((n.GetHeight()-i.GetHeight())/2),t.setBottom(t.getTop()+i.GetHeight()),t.setLeft(0),t.setRight(i.GetWidth())):this.mode===Ot.RIGHT?(t.setTop((n.GetHeight()-i.GetHeight())/2),t.setBottom(t.getTop()+i.GetHeight()),t.setRight(n.GetWidth()),t.setLeft(t.getRight()-i.GetWidth())):this.mode===Ot.TOP_LEFT?(t.setLeft(0),t.setTop(0),t.setRight(t.getLeft()+i.GetWidth()),t.setBottom(t.getTop()+i.GetHeight())):this.mode===Ot.TOP_RIGHT?(t.setRight(n.GetWidth()),t.setTop(0),t.setLeft(t.getRight()-i.GetWidth()),t.setBottom(t.getTop()+i.GetHeight())):this.mode===Ot.BOTTOM_LEFT?(t.setLeft(0),t.setBottom(n.GetHeight()),t.setRight(i.GetWidth()),t.setTop(t.getBottom()-i.GetHeight())):this.mode===Ot.BOTTOM_RIGHT&&(t.setRight(n.GetWidth()),t.setBottom(n.GetHeight()),t.setLeft(t.getRight()-i.GetWidth()),t.setTop(t.getBottom()-i.GetHeight()))}}else t.SetRectEmpty()},e.prototype.CheckLoader=function(){var t=this,e=t.url,n=t.loader,r=t.applicationId;!n&&e&&(this.loader=new sr(e,r))},e.prototype.DestroyLoader=function(){this.loader&&(this.loader.Release(),this.loader=null)},e.prototype.OnLoadEvent=function(){this.UpdateImageData()},e.prototype.OnErrorEvent=function(){this.FireEvent(Gt.ON_ERROR,this)},e.prototype.UpdateImageData=function(){if(this.loader){var t=this.loader.GetBitmap();this.bitmap=t,t&&this.autoSize&&this.AutoSize(),this.GetRoot()&&(this.Update(),this.DoCSSCustomUpdate()),t?this.FireEvent(Gt.ON_LOAD,this):this.FireEvent(Gt.ON_ERROR,this)}},e.prototype.GetBitmap=function(){return this.bitmap},e.tagName="IMAGE",e}(tr);!function(t){t.LEFT="left",t.RIGHT="right",t.CENTER="center"}(Tr||(Tr={})),function(t){t[t.LEFT=0]="LEFT",t[t.HORIZONTAL_CENTER=1]="HORIZONTAL_CENTER",t[t.RIGHT=2]="RIGHT",t[t.VERTICAL_CENTER=4]="VERTICAL_CENTER",t[t.HORIZONTAL_N_VERTICAL_CENTER=5]="HORIZONTAL_N_VERTICAL_CENTER",t[t.RIGHT_N_VERTICAL_CENTER=6]="RIGHT_N_VERTICAL_CENTER",t[t.BOTTOM=8]="BOTTOM",t[t.BOTTOM_N_HORIZONTAL_CENTER=9]="BOTTOM_N_HORIZONTAL_CENTER",t[t.BOTTOM_RIGHT=10]="BOTTOM_RIGHT"}(vr||(vr={}));var Nr,Or=function(){function t(){}return t.parser=function(t){switch(parseInt(t,10)||vr.LEFT){case vr.RIGHT:return Tr.RIGHT;case vr.HORIZONTAL_CENTER:return Tr.CENTER;default:return Tr.LEFT}},t.numToAlignEnum=function(t){switch(t){case 0:return vr.LEFT;case 1:return vr.HORIZONTAL_CENTER;case 2:return vr.RIGHT;case 4:return vr.VERTICAL_CENTER;case 5:return vr.HORIZONTAL_N_VERTICAL_CENTER;case 6:return vr.RIGHT_N_VERTICAL_CENTER;case 8:return vr.BOTTOM;case 9:return vr.BOTTOM_N_HORIZONTAL_CENTER;case 10:return vr.BOTTOM_RIGHT;default:return 0}},t}(),_r=function(){function t(t){var e=t.text,n=t.font,r=t.textAlign,o=t.rect,i=t.lineHeight,a=t.width;this.text=e,this.rect=o,this.font=n,this.lineHeight=i,this.textAlign=r||vr.LEFT,this.width=a}return t.prototype.RenderTo=function(t,e){var n=this,r=n.text,o=n.font,i=n.textAlign,a=n.rect,s=n.lineHeight,u=n.width;switch(t.save(),t.font=o.toString(),t.fillStyle=e||"#000",t.textAlign="left",i){case vr.LEFT:t.fillText(r,a.getLeft(),a.getTop()+.75*s);break;case vr.HORIZONTAL_CENTER:t.fillText(r,.5*a.getLeft()+.5*a.getRight()-.5*u,a.getTop()+.75*s);break;case vr.RIGHT:t.fillText(r,a.getRight()-u,a.getTop()+.75*s);break;case vr.VERTICAL_CENTER:t.fillText(r,a.getLeft(),.5*a.getTop()+.5*a.getBottom()-.5*s+.75*s);break;case vr.HORIZONTAL_N_VERTICAL_CENTER:t.fillText(r,.5*a.getLeft()+.5*a.getRight()-.5*u,.5*a.getTop()+.5*a.getBottom()-.5*s+.75*s);break;case vr.RIGHT_N_VERTICAL_CENTER:t.fillText(r,a.getRight()-u,.5*a.getTop()+.5*a.getBottom()-.5*s+.75*s);break;case vr.BOTTOM:t.fillText(r,a.getLeft(),a.getBottom()-s+.75*s);break;case vr.BOTTOM_N_HORIZONTAL_CENTER:t.fillText(r,.5*a.getLeft()+.5*a.getRight()-.5*u,a.getBottom()-s+.75*s);break;case vr.BOTTOM_RIGHT:t.fillText(r,a.getRight()-u,a.getBottom()-s+.75*s)}t.restore()},t}();!function(t){t.NORMAL="normal",t.ITALIC="italic",t.OBLIQUE="oblique",t.INHERIT="inherit"}(Nr||(Nr={}));var Ar,Cr,Sr,wr,Lr;!function(){function t(){}t.prototype.parser=function(t){switch(t){case"italic":return Nr.ITALIC;case"oblique":return Nr.OBLIQUE;case"inherit":return Nr.INHERIT;default:return Nr.NORMAL}}}();!function(t){t.CONNECT="connect",t.REGISTER_APPLICATION="register_application",t.UPDATE_APPLICATION="update_application",t.REMOVE_APPLICATION="remove_application",t.HEARTBEAT="heartbeat",t.SET_CONFIG="set_config",t.MOUNT="mount",t.UNMOUNT="unmount",t.SET_COOKIE="set_cookie",t.HTTP_PROXY="http_proxy"}(Ar||(Ar={})),function(t){t.ADD_DOMAIN="add_domain",t.REPORT_VALUE="report_value",t.REPORT_COUNT="report_count",t.REPORT_LOG="report_log",t.REPORT_ERROR="report_error",t.EMITTER="emitter"}(Cr||(Cr={})),function(t){t.REFRESH_PSKEY="refresh_pskey",t.ON_CLICK="on_click",t.ON_MOUSE_DOWN="on_mouse_down",t.ON_MOUSE_UP="on_mouse_up"}(Sr||(Sr={})),function(t){t.PARAM_ERROR="PARAM_ERROR",t.TYPE_ERROR="TYPE_ERROR",t.TIMEOUT="TIMEOUT",t.APPLICATION_NOT_EXIST="APPLICATION_NOT_EXIST",t.WORKER_ERROR="WORKER_ERROR",t.MESSAGE_ERROR="MESSAGE_ERROR",t.PARSE_ERROR="PARSE_ERROR",t.APP_CODE_NOT_SET="APP_CODE_NOT_SET",t.WORKER_CREATE_ERROR="WORKER_CREATE_ERROR"}(wr||(wr={})),function(t){t.POST="post",t.PUSH="push",t.RESPONSE="response",t.BROADCAST="broadcast"}(Lr||(Lr={}));var br,Gr,Mr=k.getLogger("Worker PromiseWorker"),Dr=new Error(wr.TIMEOUT),Pr=function(){function t(){this.messageCallbackMap=new Map}return t.prototype.setWorker=function(t){this.worker=t},t.prototype.pushMessage=function(t,e){this.worker.postMessage({msgType:Lr.PUSH,startTime:Date.now(),type:t,data:e})},t.prototype.postMessage=function(t,e,n,r){var o=this,i="MSG_".concat(String(t),"_").concat(O()),a=!1===n?0:parseInt(String(n),10)||2e3,s=Date.now();return new Promise((function(n,u){try{o.worker.postMessage({msgType:Lr.POST,msgId:i,type:t,data:e||{},startTime:s},{transfer:Array.isArray(r)?r:[]})}catch(t){return Mr.error("postMessage error.",t),void u(t)}var c=null;a&&(c=setTimeout((function(){o.messageCallbackMap.delete(i),t!==Ar.CONNECT&&t!==Ar.HEARTBEAT||u(Dr)}),a)),o.messageCallbackMap.set(i,(function(e){c&&(clearTimeout(c),c=null);var r=Date.now()-s;n(e),Qa.reportValue(za.ARK_POST_MESSAGE_RESPONSE_TIME,r,null,{type:t})}))}))},t.prototype.responseMessage=function(t,e,n){this.worker.postMessage({msgType:Lr.RESPONSE,startTim